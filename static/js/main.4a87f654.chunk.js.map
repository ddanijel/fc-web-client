{"version":3,"sources":["assets/img/marker-icon.png","../node_modules/@truffle/hdwallet-provider/node_modules/web3-eth-accounts/src sync","assets/img/marker-shadow.png","state/actions/types.ts","state/actions/ui.ts","ethereum/web3.tsx","ethereum/helpers.ts","state/actions/producer.ts","global/constants.ts","ethereum/foodChain.ts","ethereum/producer.ts","state/localStorage.ts","state/actions/scannedProducers.ts","state/actions/productTag.ts","ethereum/productTag.ts","state/reducers/ui.ts","state/helperFunction.ts","state/reducers/producer.ts","state/reducers/newProductTag.ts","state/reducers/mapView.ts","state/reducers/scannedProducers.ts","state/reducers/producerAuth.ts","state/reducers/generatedProductTag.ts","state/reducers/index.ts","components/ui/SideDrawer.tsx","components/ui/Header.tsx","components/ui/Theme.js","components/screens/HomeScreen.tsx","components/screens/producer/auth/SignInForm.tsx","state/actions/producerAuth.ts","components/fragments/ManageActionsForm.tsx","components/ui/hooks/useWindowDimensions.tsx","components/fragments/ManageCertificatesForm.tsx","components/screens/producer/auth/SignUpForm.tsx","components/screens/producer/auth/ProducerAuth.tsx","components/ui/Footer.tsx","components/ui/Backdrop.tsx","components/screens/PTScanner.tsx","components/PrivateRoute.tsx","components/screens/producer/ProducerBottomTagNavigation.tsx","state/actions/mapView.ts","components/fragments/ActionsOverviewCard.tsx","components/product_tag/ScannedProductTagsPanel.tsx","components/product_tag/steps/ScanProductTags.tsx","components/fragments/ProductTagDetails.tsx","components/product_tag/steps/NewPTOverview.tsx","components/fragments/QRCodeToPrint.tsx","components/product_tag/steps/PrintShareQRCode.tsx","components/product_tag/NewProductTagScreen.tsx","state/actions/newProductTag.ts","state/actions/generatedProductTag.ts","components/product_tag/ProductTagHistory.tsx","components/screens/producer/ProducerSettings.tsx","components/screens/producer/Producer.tsx","components/ui/QRScannerModal.tsx","components/map_view/MapViewModal.tsx","components/App.tsx","index.tsx"],"names":["module","exports","webpackEmptyContext","req","e","Error","code","keys","resolve","id","ActionTypes","web3","mnemonic","toggleDrawer","isDrawerOpen","type","toggleQRScannerModal","isQRScannerModalOpen","toggleIsLoading","isLoading","setNewProductTagActiveStep","activeStep","populateProducer","producerResult","contractAddress","producerContractAddress","isAuthenticated","foodChainContractAddress","producerOwnerAccountAddress","producerName","licenceNumber","url","certificates","defaultActions","productTags","variableNames","routePaths","window","ethereum","Web3","enable","currentProvider","provider","localStorage","getItem","HDWalletProvider","process","valid","inputMnemonic","prompt","utils","HDNode","isValidMnemonic","rinkebyRemoteClientAddress","setItem","setProvider","eth","Contract","JSON","parse","FoodChain","interface","address","Producer","getItemFromLocalStorage","key","serializedState","err","console","error","saveItemToLocalStorage","value","stringify","fetchScannedProducer","dispatch","a","store","getState","scannedProducers","producers","some","producer","ProducerContract","methods","describeScannedProducer","call","fetchedProducer","populatedProducer","populateScannedProducer","storeScannedProducer","scannedProducer","log","populateProductTag","productTagResult","productTagAddress","producerAddress","actions","geolocation","longitude","latitude","dateTime","year","month","day","hour","minute","previousProductTags","map","fetchPT","ProductTag","describeProductTag","fetchedProductTag","productTag","initialState","newProductTagSteps","steps","isAlreadyAuthenticated","undefined","action","name","selected","isMapViewModalOpen","reducers","combineReducers","ui","state","persistProducer","producerSignIn","authenticated","newProductTag","addActionToNewProductTag","newAction","toggleActionOfNewProductTag","act","addPreviousProductTag","resetProductTagUponCreation","mapView","toggleMapViewModal","storeMainProductTagToMapView","addFetchedPreviousProductTagForMapView","producerAuth","updateSignUpFormField","field","addDefaultActionToProducer","addCertificateToProducer","newCertificate","toggleDefaultActionForProducer","toggleCertificateForProducer","cer","certificate","generatedProductTag","saveGeneratedProductTagAddress","useStyles","makeStyles","list","width","fullList","SideDrawer","connect","props","classes","open","event","SwipeableDrawer","onClose","onOpen","className","role","onClick","onKeyDown","List","text","index","ListItem","button","ListItemIcon","ListItemText","primary","Divider","theme","createStyles","toolbarMargin","mixins","toolbar","root","flexGrow","menuButton","marginRight","spacing","title","color","textDecoration","HideOnScroll","children","trigger","useScrollTrigger","Slide","appear","direction","in","Header","Fragment","AppBar","Toolbar","IconButton","edge","aria-label","Typography","component","Link","to","variant","createMuiTheme","palette","common","black","arcBlue","main","secondary","typography","h5","fontWeight","margin","HomeScreen","Button","paper","marginTop","display","flexDirection","alignItems","avatar","backgroundColor","form","submit","SignInForm","signInProducer","history","getAccounts","accounts","from","describeProducer","push","useForm","handleSubmit","control","useHistory","onSubmit","Container","maxWidth","CssBaseline","Avatar","as","TextField","required","fullWidth","label","autoFocus","defaultValue","FormControlLabel","Checkbox","actionForm","cardRoot","overflow","cardActions","justifyContent","ManageActionsForm","reset","handleChange","toggleAction","target","checked","handleAddAction","currentActions","addAction","CardContent","style","height","FormGroup","Switch","onChange","CardActions","size","endIcon","getWindowDimensions","innerWidth","innerHeight","useWindowDimensions","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","certificateForm","cardCertificate","ManageCertificatesForm","toggleCertificate","handleAddCertificate","currentCertificates","addCertificate","Card","defaultActionsCard","cardTitle","fontSize","SignUpForm","signUpProducer","producerSignUpFormData","registerProducer","filter","send","getContractForProducer","onFormFieldChange","eventTarget","Grid","container","item","xs","sm","autoComplete","TabPanel","other","hidden","aria-labelledby","Box","p","a11yProps","background","ProducerAuth","useTheme","React","setValue","position","Tabs","newValue","indicatorColor","textColor","Tab","axis","onChangeIndex","dir","footer","grey","Copyright","align","href","Date","getFullYear","Footer","backdrop","zIndex","drawer","LoadingBackdrop","Backdrop","CircularProgress","PtScanner","PrivateRoute","Component","signInOnStartup","rest","render","pathname","stickToBottom","bottom","marginLeft","ProducerBottomTagNavigation","BottomNavigation","showLabels","BottomNavigationAction","icon","traversePreviousProductTagsTree","asyncForEach","result","prevPt","array","callback","length","ActionsOverviewCard","filteredActions","gutterBottom","dense","actionName","cloneElement","heading","pxToRem","flexBasis","flexShrink","secondaryHeading","contractAddressForm","ScannedProductTagsPanel","showMapViewForProductTag","geolocated","expanded","setExpanded","ExpansionPanel","panel","isExpanded","ExpansionPanelSummary","expandIcon","aria-controls","toString","substring","ExpansionPanelDetails","disabled","ExpansionPanelActions","bullet","transform","pos","marginBottom","ScanProductTags","demo","ProductTagDetails","NewPTOverview","QrCodeToPrint","order","bgColor","fgColor","level","this","PrintShareQRCode","componentRef","useRef","content","current","ref","stepperRoot","paddingTop","buttonBack","float","buttonNext","scanPTButton","instructions","NewProductTagScreen","generateProductTag","genProductTag","getMonth","getDate","getHours","getMinutes","methodToCall","pt","getGeolocation","coords","Stepper","alternativeLabel","Step","StepLabel","step","getStepContent","startIcon","getForwardButtonText","ProductTagHistory","ProducerSettings","subroute","match","location","path","modal","border","boxShadow","shadows","padding","QrScannerModal","fetchPreviousProductTag","productTagContractAddress","handleOnScan","data","isAddress","Modal","aria-describedby","closeAfterTransition","BackdropComponent","BackdropProps","timeout","Fade","delay","onError","onScan","closeMapButton","MapViewModal","mainMarkerIcon","L","Icon","iconUrl","require","iconRetinaUrl","iconSize","shadowUrl","lines","allProductTags","concat","forEach","pt1","pt2","pt3","from_lat","from_long","to_lat","to_long","Map","animate","center","zoom","TileLayer","attribution","Marker","Popup","Polyline","positions","minHeight","App","ThemeProvider","basename","exact","createStore","composeWithDevTools","applyMiddleware","thunk","ReactDOM","document","querySelector"],"mappings":"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","file":"static/js/main.4a87f654.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/marker-icon.71c80642.png\";","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 862;","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC\"","import {\n    SetNewProductTagActiveStepAction,\n    ToggleDrawerAction,\n    ToggleIsLoadingAction,\n    ToggleQRScannerModalAction\n} from \"./ui\";\nimport {PersistProducerAction} from \"./producer\";\nimport {\n    AddActionToNewProductTagAction,\n    AddPreviousProductTagAction,\n    FetchPreviousProductTagAction,\n    GenerateProductTagAction,\n    ResetProductTagUponCreationAction,\n    ToggleActionOfNewProductTagAction,\n} from \"./newProductTag\";\nimport {FetchProductTagAction} from \"./productTag\";\nimport {\n    AddFetchedPreviousProductTagForMapViewAction,\n    ShowMapViewForProductTagAction,\n    StoreMainProductTagToMapViewAction,\n    ToggleMapViewModalAction\n} from \"./mapView\";\nimport {FetchScannedProducerAction, StoreScannedProducerAction} from \"./scannedProducers\";\nimport {\n    AddCertificateToProducerAction,\n    AddDefaultActionToProducerAction,\n    ProducerSignInAction,\n    ToggleCertificateForProducerAction,\n    ToggleDefaultActionForProducerAction,\n    UpdateSignUpFormFieldAction\n} from \"./producerAuth\";\nimport {SaveGeneratedProductTagAddressAction} from \"./generatedProductTag\";\n\nexport enum ActionTypes {\n    toggleDrawer,\n    toggleIsLoading,\n    toggleQRScannerModal,\n    persistProducer,\n    producerSignIn,\n    addActionToNewProductTag,\n    toggleActionOfNewProductTag,\n    generateProductTag,\n    fetchProductTag,\n    fetchPreviousProductTag,\n    addPreviousProductTag,\n    resetProductTagUponCreation,\n    toggleMapViewModal,\n    showMapViewForProductTag,\n    fetchScannedProducer,\n    storeScannedProducer,\n    updateSignUpFormField,\n    addDefaultActionToProducer,\n    toggleDefaultActionForProducer,\n    addCertificateToProducer,\n    toggleCertificateForProducer,\n    saveGeneratedProductTagAddress,\n    storeMainProductTagToMapView,\n    addFetchedPreviousProductTagForMapView,\n    setNewProductTagActiveStep\n}\n\nexport type Action =\n    ToggleDrawerAction |\n    ToggleIsLoadingAction |\n    ToggleQRScannerModalAction |\n    PersistProducerAction |\n    ProducerSignInAction |\n    AddActionToNewProductTagAction |\n    ToggleActionOfNewProductTagAction |\n    GenerateProductTagAction |\n    FetchProductTagAction |\n    FetchPreviousProductTagAction |\n    AddPreviousProductTagAction |\n    ResetProductTagUponCreationAction |\n    ToggleMapViewModalAction |\n    ShowMapViewForProductTagAction |\n    FetchScannedProducerAction |\n    StoreScannedProducerAction |\n    UpdateSignUpFormFieldAction |\n    AddDefaultActionToProducerAction |\n    ToggleDefaultActionForProducerAction |\n    AddCertificateToProducerAction |\n    ToggleCertificateForProducerAction |\n    SaveGeneratedProductTagAddressAction |\n    StoreMainProductTagToMapViewAction |\n    AddFetchedPreviousProductTagForMapViewAction |\n    SetNewProductTagActiveStepAction;","import {ActionTypes} from \"./types\";\n\nexport interface Ui {\n    isDrawerOpen: boolean;\n    isLoading: boolean;\n    isQRScannerModalOpen: boolean;\n    newProductTagSteps: INewProductTagSteps;\n}\n\ninterface INewProductTagSteps {\n    steps: string[];\n    activeStep: number;\n\n}\n\nexport interface ToggleDrawerAction {\n    type: ActionTypes.toggleDrawer;\n    isDrawerOpen: boolean;\n}\n\nexport interface SetNewProductTagActiveStepAction {\n    type: ActionTypes.setNewProductTagActiveStep;\n    activeStep: number;\n}\n\nexport interface ToggleQRScannerModalAction {\n    type: ActionTypes.toggleQRScannerModal;\n    isQRScannerModalOpen: boolean;\n}\n\nexport interface ToggleIsLoadingAction {\n    type: ActionTypes.toggleIsLoading;\n    isLoading: boolean;\n}\n\nexport const toggleDrawer = (isDrawerOpen: boolean): ToggleDrawerAction => {\n    return {\n        type: ActionTypes.toggleDrawer,\n        isDrawerOpen\n    }\n};\n\nexport const toggleQRScannerModal = (isQRScannerModalOpen: boolean): ToggleQRScannerModalAction => {\n    return {\n        type: ActionTypes.toggleQRScannerModal,\n        isQRScannerModalOpen\n    }\n};\n\nexport const toggleIsLoading = (isLoading: boolean): ToggleIsLoadingAction => {\n    return {\n        type: ActionTypes.toggleIsLoading,\n        isLoading\n    }\n};\n\nexport const setNewProductTagActiveStep = (activeStep: number): SetNewProductTagActiveStepAction => {\n    return {\n        type: ActionTypes.setNewProductTagActiveStep,\n        activeStep\n    }\n};","import Web3 from 'web3';\nimport {variableNames} from \"../global/constants\";\nimport HDWalletProvider from \"@truffle/hdwallet-provider\";\nimport {isMnemonicValid} from \"./helpers\";\n// https://medium.com/metamask/no-longer-injecting-web3-js-4a899ad6e59e\n// https://medium.com/@awantoch/how-to-connect-web3-js-to-metamask-in-2020-fee2b2edf58a\n\n\n\nconst ethEnabled = () => {\n    // @ts-ignore\n    if (window.ethereum) {\n        // @ts-ignore\n        window.web3 = new Web3(window.ethereum);\n        // @ts-ignore\n        window.ethereum.enable();\n        return true;\n    }\n    return false;\n};\n\nlet web3;\n\nif (ethEnabled()) {\n    // @ts-ignore\n    web3 = new Web3(window.web3.currentProvider);\n} else {\n\n    let provider;\n\n    let mnemonic = localStorage.getItem(variableNames.ethAccountMnemonic);\n    if (mnemonic !== null) {\n        provider = new HDWalletProvider(\n            mnemonic,\n            process.env.REACT_APP_INFURA_REMOTE_CLIENT_URL\n        );\n    } else {\n        let valid = false;\n        do {\n            const inputMnemonic = prompt(\"Please enter the Seed words\");\n            valid = isMnemonicValid(inputMnemonic);\n            if (valid) {\n                // we can do this since the above method checks already that is not null\n                // @ts-ignore\n                provider = new HDWalletProvider(inputMnemonic, rinkebyRemoteClientAddress);\n                // @ts-ignore\n                localStorage.setItem(variableNames.ethAccountMnemonic, inputMnemonic);\n            }\n        } while (!valid);\n    }\n\n    web3 = new Web3();\n    web3.setProvider(provider);\n}\n\nexport default web3;","import {utils} from \"ethers\";\nimport web3 from \"./web3\";\n\nexport const isMnemonicValid = (mnemonic: string | null): boolean => {\n    if (mnemonic == null) return false;\n    return utils.HDNode.isValidMnemonic(mnemonic);\n};\nexport const isAddressValid = (address: string | null): boolean => {\n    if (address == null) return false;\n    return web3.utils.isAddress(address);\n};","import {ActionTypes} from \"./types\";\nimport {IProducer} from \"../../interfaces/Producer\";\n\nexport interface PersistProducerAction {\n    type: ActionTypes.persistProducer;\n    producer: IProducer\n}\n\n\nexport const populateProducer = (producerResult: any, contractAddress: string): IProducer => {\n    return {\n        producerContractAddress: contractAddress,\n        isAuthenticated: true,\n        foodChainContractAddress: producerResult[0],\n        producerOwnerAccountAddress: producerResult[1],\n        producerName: producerResult[2],\n        licenceNumber: producerResult[3],\n        url: producerResult[4],\n        certificates: producerResult[5],\n        defaultActions: producerResult[6],\n        productTags: producerResult[7]\n    }\n};\n\n","export const foodChainFactoryAddress = \"0x17a086C0306868a18648C89A41A2C6f4F7eEF0ac\";\nexport const variableNames = {\n    // producerContractAddress: \"producerContractAddress\",\n    ethAccountMnemonic: \"ethAccountMnemonic\",\n    etherscanBaseURL: \"https://rinkeby.etherscan.io\",\n    producer: \"producer\"\n};\n\nexport const routePaths = {\n    ptScan: \"/pt/scan\",\n    producer: \"/producer\",\n    producerAuthPage: \"/producer/auth\",\n    createProductTag: \"/producer/newpt\",\n    producerHistoryPage: \"/producer/pthistory\",\n    producerSettings: \"/producer/settings\",\n    testMapView: \"/map\"\n};","import web3 from './web3';\nimport FoodChain from './build/FoodChain.json';\nimport {foodChainFactoryAddress} from \"../global/constants\";\n\nexport default () => new web3.eth.Contract(\n    JSON.parse(FoodChain.interface),\n    foodChainFactoryAddress\n);","import web3 from './web3';\nimport Producer from './build/Producer.json';\n\nexport default (address: string) => new web3.eth.Contract(\n    JSON.parse(Producer.interface),\n    address\n);","export const getItemFromLocalStorage = (key: string): any => {\n    try {\n        const serializedState = localStorage.getItem(key);\n        if (serializedState === null) {\n            return \"\";\n        }\n        return JSON.parse(serializedState);\n    } catch (err) {\n        console.error(\"Error while getting the key from Local Storage\\nKey: \", key);\n        return \"\";\n    }\n};\n\nexport const saveItemToLocalStorage = (key: string, value: any) => {\n    try {\n        const serializedState = JSON.stringify(value);\n        localStorage.setItem(key, serializedState);\n    } catch {\n        console.error(\"Error while saving into Local Storage\\nKey: \", key, \"\\nValue: \", value);\n    }\n};\n","import {ActionTypes} from \"./types\";\nimport {IScannedProducer} from \"../../interfaces/Producer\";\nimport {Dispatch} from \"redux\";\nimport {toggleIsLoading, ToggleIsLoadingAction} from \"./ui\";\nimport ProducerContract from \"../../ethereum/producer\";\nimport {store} from \"../../index\"\n\nexport interface FetchScannedProducerAction {\n    type: ActionTypes.fetchScannedProducer;\n}\n\nexport interface StoreScannedProducerAction {\n    type: ActionTypes.storeScannedProducer;\n    scannedProducer: IScannedProducer\n}\n\n\nexport const fetchScannedProducer = (producerContractAddress: string) => {\n    return async (dispatch: Dispatch) => {\n        dispatch<ToggleIsLoadingAction>(toggleIsLoading(true));\n        try {\n            if (!store.getState().scannedProducers.producers.some(producer => producer.producerContractAddress === producerContractAddress)) {\n                const fetchedProducer = await ProducerContract(producerContractAddress).methods.describeScannedProducer().call();\n                const populatedProducer = populateScannedProducer(fetchedProducer, producerContractAddress);\n                dispatch<StoreScannedProducerAction>({\n                    type: ActionTypes.storeScannedProducer,\n                    scannedProducer: populatedProducer\n                });\n            } else {\n                console.log(\"Producer Already Fetched.\")\n            }\n\n        } catch (e) {\n            // todo display modal\n            console.error(\"Error while fetching the scanned producer, message: \", e);\n        } finally {\n            dispatch<ToggleIsLoadingAction>(toggleIsLoading(false));\n        }\n    }\n};\n\n\nconst populateScannedProducer = (producerResult: any, producerContractAddress: string): IScannedProducer => {\n    return {\n        producerContractAddress,\n        producerOwnerAccountAddress: producerResult[0],\n        producerName: producerResult[1],\n        licenceNumber: producerResult[2],\n        url: producerResult[3],\n        certificates: producerResult[4],\n        productTags: producerResult[5]\n    }\n};\n","import {ActionTypes} from \"./types\";\nimport {IProductTag} from \"../../interfaces/ProductTag\";\nimport {Dispatch} from \"redux\";\nimport ProductTagContract from \"../../ethereum/productTag\";\nimport {fetchScannedProducer, FetchScannedProducerAction} from \"./scannedProducers\";\n\nexport interface FetchProductTagAction {\n    type: ActionTypes.fetchProductTag;\n    productTag: IProductTag\n}\n\nconst populateProductTag = (productTagResult: any, productTagAddress: string): IProductTag => {\n    return {\n        productTagAddress: productTagAddress,\n        producerAddress: productTagResult[0],\n        actions: productTagResult[1],\n        geolocation: {\n            longitude: productTagResult[2][0],\n            latitude: productTagResult[2][1]\n        },\n        dateTime: {\n            year: productTagResult[3][0],\n            month: productTagResult[3][1],\n            day: productTagResult[3][2],\n            hour: productTagResult[3][3],\n            minute: productTagResult[3][4],\n        },\n        previousProductTags: productTagResult[4].map(address => ({\n            productTagAddress: address\n        }))\n    }\n};\n\nexport const fetchPT = async (dispatch: Dispatch, productTagAddress: string): Promise<IProductTag> => {\n    let productTag;\n    console.log(\"fetchPT: \", productTagAddress);\n    try {\n        const fetchedProductTag = await ProductTagContract(productTagAddress)\n            .methods.describeProductTag().call();\n        productTag = populateProductTag(fetchedProductTag, productTagAddress);\n        // @ts-ignore\n        dispatch<FetchScannedProducerAction>(fetchScannedProducer(productTag.producerAddress));\n    } catch (e) {\n        console.error(\"Error while fetching the product tag for address: \", productTagAddress, \"\\nError: \", e);\n    } finally {\n        return productTag\n    }\n};","import web3 from './web3';\nimport ProductTag from './build/ProductTag.json';\n\nexport default (address: string) => new web3.eth.Contract(\n    JSON.parse(ProductTag.interface),\n    address\n);","import {Action, ActionTypes, Ui} from \"../actions\"\n\nconst initialState = {\n    isDrawerOpen: false,\n    isLoading: false,\n    isQRScannerModalOpen: false,\n    newProductTagSteps: {\n        steps: ['Scan', 'Actions', 'Create', \"Print\"],\n        activeStep: 0\n    }\n};\n\nexport const uiReducer = (state: Ui = initialState, action: Action) => {\n    switch (action.type) {\n        case ActionTypes.toggleDrawer:\n            return {\n                ...state,\n                isDrawerOpen: action.isDrawerOpen\n            };\n        case ActionTypes.toggleIsLoading:\n            return {\n                ...state,\n                isLoading: action.isLoading\n            };\n        case ActionTypes.toggleQRScannerModal:\n            return {\n                ...state,\n                isQRScannerModalOpen: action.isQRScannerModalOpen\n            };\n        case ActionTypes.setNewProductTagActiveStep:\n            return {\n                ...state,\n                newProductTagSteps: {\n                    ...state.newProductTagSteps,\n                    activeStep: action.activeStep\n                }\n            };\n        default:\n            return state;\n    }\n};","import {getItemFromLocalStorage} from \"./localStorage\";\n\nexport const isAlreadyAuthenticated = ():boolean => {\n    return JSON.stringify(getItemFromLocalStorage(\"authenticated\")) === 'true'\n};","import {Action, ActionTypes} from \"../actions\";\nimport {IProducer} from \"../../interfaces/Producer\";\nimport {getItemFromLocalStorage} from \"../localStorage\";\nimport {foodChainFactoryAddress, variableNames} from \"../../global/constants\";\nimport {isAlreadyAuthenticated} from \"../helperFunction\";\n\nconst producer: IProducer = getItemFromLocalStorage(variableNames.producer);\n\nconst initialState = {\n    isAuthenticated: isAlreadyAuthenticated(),\n    foodChainContractAddress: foodChainFactoryAddress,\n    producerContractAddress: producer.producerContractAddress === undefined ? \"\" : producer.producerContractAddress,\n    producerOwnerAccountAddress: producer.producerOwnerAccountAddress === undefined ? \"\" : producer.producerOwnerAccountAddress,\n    producerName: producer.producerName === undefined ? \"\" : producer.producerName,\n    licenceNumber: producer.licenceNumber === undefined ? \"\" : producer.licenceNumber,\n    url: producer.url === undefined ? \"\" : producer.url,\n    defaultActions: producer.defaultActions === undefined ? [] : producer.defaultActions,\n    certificates: producer.certificates === undefined ? [] : producer.certificates,\n    productTags: producer.productTags === undefined ? [] : producer.productTags\n};\n\nexport const producerReducer = (state: IProducer = initialState, action: Action) => {\n    switch (action.type) {\n        case ActionTypes.persistProducer:\n            const producer = action.producer;\n            return {\n                ...state,\n                isAuthenticated: true,\n                producerContractAddress: producer.producerContractAddress,\n                producerOwnerAccountAddress: producer.producerOwnerAccountAddress,\n                producerName: producer.producerName,\n                licenceNumber: producer.licenceNumber,\n                url: producer.url,\n                defaultActions: producer.defaultActions,\n                certificates: producer.certificates,\n                productTags: producer.productTags\n            };\n        case ActionTypes.producerSignIn:\n            return {\n                ...state,\n                isAuthenticated: action.authenticated\n            };\n        default:\n            return state;\n    }\n};","import {Action, ActionTypes} from \"../actions\";\nimport {INewProductTag} from \"../../interfaces/ProductTag\";\nimport {IProducer} from \"../../interfaces/Producer\";\nimport {getItemFromLocalStorage} from \"../localStorage\";\nimport {variableNames} from \"../../global/constants\";\n\nconst producer: IProducer = getItemFromLocalStorage(variableNames.producer);\n\nconst initialState = {\n    actions: producer.defaultActions === undefined ? [] : producer.defaultActions.map(action => ({\n        name: action,\n        selected: true\n    })),\n    dateTime: {\n        year: 0,\n        month: 0,\n        day: 0,\n        hour: 0,\n        minute: 0,\n    },\n    geolocation: {\n        longitude: 0,\n        latitude: 0,\n    },\n    previousProductTags: []\n};\n\nexport const newProductTagReducer = (state: INewProductTag = initialState, action: Action): INewProductTag => {\n    switch (action.type) {\n        case ActionTypes.addActionToNewProductTag:\n            return {\n                ...state,\n                actions: [\n                    ...state.actions,\n                    action.newAction\n                ]\n            };\n        case ActionTypes.toggleActionOfNewProductTag:\n            return {\n                ...state,\n                actions: state.actions.map(act => {\n                    if (act.name === action.action.name) {\n                        return {\n                            name: act.name,\n                            selected: !act.selected\n                        };\n                    } else return act;\n                })\n            };\n        case ActionTypes.addPreviousProductTag:\n            return {\n                ...state,\n                previousProductTags: [\n                    ...state.previousProductTags,\n                    action.productTag\n                ]\n\n            };\n        case ActionTypes.resetProductTagUponCreation:\n            return initialState;\n        default:\n            return state;\n    }\n};","import {Action, ActionTypes} from \"../actions\"\nimport {IMapView} from \"../../interfaces/MapView\";\n\nconst initialState = {\n    isMapViewModalOpen: false,\n    productTag: {\n        productTagAddress: \"\",\n        producerAddress: \"\",\n        actions: [],\n        dateTime: {\n            year: 0,\n            month: 0,\n            day: 0,\n            hour: 0,\n            minute: 0,\n        },\n        geolocation: {\n            longitude: 0,\n            latitude: 0,\n        },\n        previousProductTags: []\n    },\n    previousProductTags: []\n};\n\nexport const mapViewReducer = (state: IMapView = initialState, action: Action) => {\n    switch (action.type) {\n        case ActionTypes.toggleMapViewModal:\n            return action.isMapViewModalOpen ? {\n                ...state,\n                isMapViewModalOpen: true\n            } : initialState;\n        case ActionTypes.storeMainProductTagToMapView:\n            return {\n                ...state,\n                isMapViewModalOpen: true,\n                productTag: action.productTag\n            };\n        case ActionTypes.addFetchedPreviousProductTagForMapView: {\n            return {\n                ...state,\n                previousProductTags: [\n                    ...state.previousProductTags,\n                    action.productTag\n                ]\n            }\n        }\n        default:\n            return state;\n    }\n};","import {Action, ActionTypes} from \"../actions\";\nimport {IScannedProducer} from \"../../interfaces/Producer\";\n\nexport interface IScannedProducerReducer {\n    producers: IScannedProducer[]\n}\n\nconst initialState = {\n    producers: []\n};\n\nexport const scannedProducersReducer = (state: IScannedProducerReducer = initialState, action: Action): IScannedProducerReducer => {\n    switch (action.type) {\n        case ActionTypes.storeScannedProducer:\n            return {\n                ...state,\n                producers: [\n                    ...state.producers,\n                    action.scannedProducer\n                ]\n            };\n        default:\n            return state;\n    }\n};","import {Action, ActionTypes} from \"../actions\";\nimport {ISignUpFormData} from \"../../interfaces/Producer\";\n\nconst initialState = {\n    producerName: \"\",\n    licenceNumber: \"\",\n    url: \"\",\n    defaultActions: [],\n    certificates: []\n};\n\nexport const producerAuthReducer = (state: ISignUpFormData = initialState, action: Action): ISignUpFormData => {\n    switch (action.type) {\n        case ActionTypes.updateSignUpFormField:\n            return {\n                ...state,\n                [action.field.name]: action.field.value\n            };\n        case ActionTypes.addDefaultActionToProducer:\n            return {\n                ...state,\n                defaultActions: [\n                    ...state.defaultActions,\n                    action.newAction\n                ]\n            };\n        case ActionTypes.addCertificateToProducer:\n            return {\n                ...state,\n                certificates: [\n                    ...state.certificates,\n                    action.newCertificate\n                ]\n            };\n        case ActionTypes.toggleDefaultActionForProducer:\n            return {\n                ...state,\n                defaultActions: state.defaultActions.map(act => {\n                    if (act.name === action.action.name) {\n                        return {\n                            name: act.name,\n                            selected: !act.selected\n                        };\n                    } else return act;\n                })\n            };\n        case ActionTypes.toggleCertificateForProducer:\n            return {\n                ...state,\n                certificates: state.certificates.map(cer => {\n                    if (cer.name === action.certificate.name) {\n                        return {\n                            name: cer.name,\n                            selected: !cer.selected\n                        };\n                    } else return cer;\n                })\n            };\n        default:\n            return state;\n    }\n};","import {Action, ActionTypes} from \"../actions\"\nimport {IGeneratedProductTag} from \"../../interfaces/ProductTag\";\n\nconst initialState = {\n    address: \"\"\n};\n\nexport const generatedProductTagReducer = (state: IGeneratedProductTag = initialState, action: Action) => {\n    switch (action.type) {\n        case ActionTypes.saveGeneratedProductTagAddress:\n            return {\n                ...state,\n                address: action.address\n            };\n        default:\n            return state;\n    }\n};","import {combineReducers} from \"redux\";\nimport {Ui} from \"../actions\";\nimport {uiReducer} from \"./ui\";\nimport {IProducer, ISignUpFormData} from \"../../interfaces/Producer\";\nimport {producerReducer} from \"./producer\";\nimport {IGeneratedProductTag, INewProductTag} from \"../../interfaces/ProductTag\";\nimport {newProductTagReducer} from \"./newProductTag\";\nimport {IMapView} from \"../../interfaces/MapView\";\nimport {mapViewReducer} from \"./mapView\";\nimport {IScannedProducerReducer, scannedProducersReducer} from \"./scannedProducers\";\nimport {producerAuthReducer} from \"./producerAuth\";\nimport {generatedProductTagReducer} from \"./generatedProductTag\";\n\n\nexport interface StoreState {\n    ui: Ui;\n    producer: IProducer;\n    newProductTag: INewProductTag;\n    mapView: IMapView;\n    scannedProducers: IScannedProducerReducer;\n    producerAuth: ISignUpFormData;\n    generatedProductTag: IGeneratedProductTag;\n}\n\nexport const reducers = combineReducers<StoreState>({\n    ui: uiReducer,\n    producer: producerReducer,\n    newProductTag: newProductTagReducer,\n    mapView: mapViewReducer,\n    scannedProducers: scannedProducersReducer,\n    producerAuth: producerAuthReducer,\n    generatedProductTag: generatedProductTagReducer\n});","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport LanguageIcon from '@material-ui/icons/Language';\nimport {connect} from \"react-redux\";\nimport {toggleDrawer, Ui} from \"../../state/actions\";\nimport {StoreState} from \"../../state/reducers\";\n\ninterface Props {\n    children?: React.ReactElement;\n    ui: Ui;\n    toggleDrawer: typeof toggleDrawer;\n}\n\nconst useStyles = makeStyles({\n    list: {\n        width: 250,\n    },\n    fullList: {\n        width: 'auto',\n    },\n});\n\nconst _SideDrawer = (props: Props) => {\n    const classes = useStyles();\n\n\n    const toggleDrawer = (open: boolean) => (\n        event: React.KeyboardEvent | React.MouseEvent,\n    ) => {\n        if (\n            event &&\n            event.type === 'keydown' &&\n            ((event as React.KeyboardEvent).key === 'Tab' ||\n                (event as React.KeyboardEvent).key === 'Shift')\n        ) {\n            return;\n        }\n        props.toggleDrawer(open);\n    };\n\n    const sideList = () => (\n        <div\n            className={classes.list}\n            role=\"presentation\"\n            onClick={toggleDrawer(false)}\n            onKeyDown={toggleDrawer(false)}\n        >\n            <List>\n                {['Language'].map((text, index) => (\n                    <ListItem button key={text}>\n                        <ListItemIcon>{index % 2 === 0 ? <LanguageIcon/> : <LanguageIcon/>}</ListItemIcon>\n                        <ListItemText primary={text}/>\n                    </ListItem>\n                ))}\n            </List>\n            <Divider/>\n        </div>\n    );\n\n    return (\n        <>\n            <SwipeableDrawer\n                open={props.ui.isDrawerOpen}\n                onClose={toggleDrawer(false)}\n                onOpen={toggleDrawer(true)}\n            >\n                {sideList()}\n            </SwipeableDrawer>\n        </>\n    );\n};\n\nconst mapStateToProps = ({ui}: StoreState) => {\n    return {ui};\n};\n\nexport const SideDrawer = connect(\n    mapStateToProps,\n    {toggleDrawer}\n)(_SideDrawer);","import React from 'react';\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport useScrollTrigger from \"@material-ui/core/useScrollTrigger\";\nimport Slide from \"@material-ui/core/Slide\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from '@material-ui/icons/Menu';\nimport {SideDrawer} from \"./SideDrawer\";\nimport {connect} from \"react-redux\";\nimport {toggleDrawer} from \"../../state/actions\";\nimport {Link} from \"react-router-dom\";\nimport {StoreState} from \"../../state/reducers\";\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        toolbarMargin: {\n            ...theme.mixins.toolbar\n        },\n        root: {\n            flexGrow: 1,\n        },\n        menuButton: {\n            marginRight: theme.spacing(2),\n        },\n        title: {\n            flexGrow: 1,\n            color: 'inherit',\n            textDecoration: 'none'\n        },\n    }),\n);\n\ninterface Props {\n    children?: React.ReactElement;\n    toggleDrawer: typeof toggleDrawer;\n}\n\nfunction HideOnScroll(props: Props) {\n    const { children } = props;\n    const trigger = useScrollTrigger({});\n\n    return (\n        <Slide appear={false} direction=\"down\" in={!trigger}>\n            {children}\n        </Slide>\n    );\n}\n\nconst _Header = (props: Props) => {\n    const classes = useStyles();\n\n    const onDrawerButtonClicked = (): void => {\n        props.toggleDrawer(true);\n    };\n\n    return (\n        <React.Fragment>\n            <HideOnScroll {...props}>\n                <AppBar color=\"primary\">\n                    <Toolbar>\n                        <IconButton onClick={onDrawerButtonClicked} edge=\"start\" className={classes.menuButton}\n                                    color=\"inherit\" aria-label=\"menu\">\n                            <MenuIcon/>\n                        </IconButton>\n                        <Typography component={Link} to=\"/\" variant=\"h6\" className={classes.title}>\n                            FoodChain\n                        </Typography>\n                    </Toolbar>\n                </AppBar>\n            </HideOnScroll>\n            <div className={\n                classes.toolbarMargin\n            }/>\n            <SideDrawer/>\n        </React.Fragment>\n    );\n};\n\nconst mapStateToProps = ({ui}: StoreState) => {\n    return {ui};\n};\n\nexport const Header = connect(\n    mapStateToProps,\n    {toggleDrawer}\n)(_Header);\n","import {createMuiTheme} from '@material-ui/core/styles';\n\nconst black = \"#000000\";\nconst archBlue = \"#0B72B9\";\n\nconst theme = createMuiTheme({\n    palette: {\n        // type: \"dark\",\n        common: {\n            black: `${black}`,\n            arcBlue: `${archBlue}`,\n        },\n        primary: {\n            main: `${black}`\n        },\n        secondary: {\n            main: `${archBlue}`\n        }\n    },\n    typography: {\n        h5: {\n            fontWeight: 700\n        }\n    }\n});\n\nexport default theme;","import React from 'react';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport {Link} from \"react-router-dom\";\nimport {routePaths} from \"../../global/constants\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        root: {\n            '& > *': {\n                margin: theme.spacing(1),\n            }\n        },\n    }),\n);\n\nconst HomeScreen = () => {\n    const classes = useStyles();\n    return (\n        <div className={classes.root}>\n            <Button component={Link} to={routePaths.producerAuthPage} variant=\"contained\">Producer</Button>\n            <Button component={Link} to={routePaths.ptScan} variant=\"contained\">Scan Product</Button>\n        </div>\n    );\n};\n\nexport default HomeScreen;\n","import React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport {Controller, useForm} from \"react-hook-form\";\nimport {ISignInFormData} from \"../../../../interfaces/Producer\";\nimport {connect} from \"react-redux\";\nimport {signInProducer} from \"../../../../state/actions\";\nimport {useHistory} from \"react-router-dom\";\n\n\nconst useStyles = makeStyles(theme => ({\n    paper: {\n        marginTop: theme.spacing(2),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        // width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n}));\n\ninterface Props {\n    children?: React.ReactElement;\n    signInProducer: Function;\n\n}\n\n\nconst _SignInForm = (props: Props) => {\n    const classes = useStyles();\n    const {handleSubmit, control} = useForm<ISignInFormData>();\n    const history = useHistory();\n\n\n    const onSubmit = handleSubmit(\n        ({\n             producerContractAddress\n         }) => {\n            props.signInProducer(\n                producerContractAddress,\n                history\n            );\n        });\n\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline/>\n            <div className={classes.paper}>\n                <Avatar className={classes.avatar}>\n                    <LockOutlinedIcon/>\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    Sign in\n                </Typography>\n                <form className={classes.form} onSubmit={onSubmit}>\n                    <Controller\n                        name=\"producerContractAddress\"\n                        as={<TextField\n                            variant=\"outlined\"\n                            margin=\"normal\"\n                            required\n                            fullWidth\n                            id=\"producerContractAddress\"\n                            label=\"Producer Contract Address\"\n                            name=\"producerContractAddress\"\n                            autoFocus\n                        />}\n                        control={control}\n                        defaultValue=\"0xb82BC4B22A092C8C80AA04170482AfF3189FCD30\"\n                    />\n\n                    <FormControlLabel\n                        control={<Checkbox value=\"remember\" color=\"primary\"/>}\n                        label=\"Remember me\"\n                    />\n                    <Button\n                        type=\"submit\"\n                        fullWidth\n                        variant=\"contained\"\n                        color=\"primary\"\n                        className={classes.submit}\n                    >\n                        Sign In\n                    </Button>\n                </form>\n            </div>\n        </Container>\n    );\n};\n\n\nexport const SignInForm = connect(\n    null,\n    {signInProducer}\n)(_SignInForm);\n","import {IProducerNewCertificate, ISignUpFormData} from \"../../interfaces/Producer\";\nimport {History} from \"history\";\nimport {Dispatch} from \"redux\";\nimport {toggleIsLoading, ToggleIsLoadingAction} from \"./ui\";\nimport web3 from \"../../ethereum/web3\";\nimport FoodChain from \"../../ethereum/foodChain\";\nimport ProducerContract from \"../../ethereum/producer\";\nimport {saveItemToLocalStorage} from \"../localStorage\";\nimport {routePaths, variableNames} from \"../../global/constants\";\nimport {ActionTypes} from \"./types\";\nimport {PersistProducerAction, populateProducer} from \"./producer\";\nimport {INewProductTagAction} from \"../../interfaces/ProductTag\";\n\n\nexport interface UpdateSignUpFormFieldAction {\n    type: ActionTypes.updateSignUpFormField;\n    field: {\n        name: string,\n        value: string\n    }\n}\n\nexport interface AddDefaultActionToProducerAction {\n    type: ActionTypes.addDefaultActionToProducer;\n    newAction: INewProductTagAction\n}\n\nexport interface AddCertificateToProducerAction {\n    type: ActionTypes.addCertificateToProducer;\n    newCertificate: IProducerNewCertificate\n}\n\nexport const addDefaultActionToProducer = (newAction: INewProductTagAction): AddDefaultActionToProducerAction => {\n    return {\n        type: ActionTypes.addDefaultActionToProducer,\n        newAction\n    }\n};\n\nexport const addCertificateToProducer = (newCertificate: IProducerNewCertificate): AddCertificateToProducerAction => {\n    return {\n        type: ActionTypes.addCertificateToProducer,\n        newCertificate\n    }\n};\n\n\nexport interface ProducerSignInAction {\n    type: ActionTypes.producerSignIn;\n    authenticated: boolean\n}\n\nexport const signUpProducer = (producerSignUpFormData: ISignUpFormData, history: History): (dispatch: Dispatch) => Promise<void> => {\n    return async (dispatch: Dispatch) => {\n        dispatch<ToggleIsLoadingAction>(toggleIsLoading(true));\n\n        try {\n            const accounts = await web3.eth.getAccounts();\n            await FoodChain().methods.registerProducer(\n                producerSignUpFormData.producerName,\n                producerSignUpFormData.licenceNumber,\n                producerSignUpFormData.url,\n                producerSignUpFormData.defaultActions.filter(action => action.selected).map(action => action.name),\n                producerSignUpFormData.certificates.filter(certificate => certificate.selected).map(certificate => certificate.name)\n            ).send({from: accounts[0]});\n            const contractAddress = await FoodChain().methods.getContractForProducer(accounts[0]).call();\n            const producerResult = await ProducerContract(contractAddress).methods.describeProducer().call();\n            const producer = populateProducer(producerResult, contractAddress);\n            saveItemToLocalStorage(variableNames.producer, producer);\n            saveItemToLocalStorage(\"authenticated\", true);\n            dispatch<PersistProducerAction>({\n                type: ActionTypes.persistProducer,\n                producer\n            });\n            history.push(routePaths.producer);\n        } catch (e) {\n            console.error(e);\n        } finally {\n            dispatch<ToggleIsLoadingAction>(toggleIsLoading(false));\n        }\n    }\n};\n\nexport const signInProducer = (producerContractAddress: string, history: History) => {\n    return async (dispatch: Dispatch) => {\n        dispatch<ToggleIsLoadingAction>(toggleIsLoading(true));\n        try {\n            const accounts = await web3.eth.getAccounts();\n            const authenticated = await ProducerContract(producerContractAddress).methods.isAuthenticated().call({from: accounts[0]});\n            dispatch<ProducerSignInAction>({\n                type: ActionTypes.producerSignIn,\n                authenticated: authenticated\n            });\n            if (authenticated) {\n                const producerResult = await ProducerContract(producerContractAddress).methods.describeProducer().call();\n                const producer = populateProducer(producerResult, producerContractAddress);\n                dispatch<PersistProducerAction>({\n                    type: ActionTypes.persistProducer,\n                    producer\n                });\n                saveItemToLocalStorage(variableNames.producer, producer);\n                saveItemToLocalStorage(\"authenticated\", true);\n                history.push(routePaths.producer);\n            }\n        } catch (e) {\n            dispatch<ProducerSignInAction>({\n                type: ActionTypes.producerSignIn,\n                authenticated: false\n            });\n            console.error(\"Error while signing in the producer, message: \", e);\n        } finally {\n            dispatch<ToggleIsLoadingAction>(toggleIsLoading(false));\n        }\n    }\n};\n\n\nexport const updateSignUpFormField = (name: string, value: string): UpdateSignUpFormFieldAction => {\n    return {\n        type: ActionTypes.updateSignUpFormField,\n        field: {\n            name,\n            value\n        }\n    }\n};\n\n\nexport interface ToggleDefaultActionForProducerAction {\n    type: ActionTypes.toggleDefaultActionForProducer,\n    action: INewProductTagAction\n}\n\n\nexport const toggleDefaultActionForProducer = (action: INewProductTagAction): ToggleDefaultActionForProducerAction => {\n    return {\n        type: ActionTypes.toggleDefaultActionForProducer,\n        action\n    }\n};\n\n\nexport interface ToggleCertificateForProducerAction {\n    type: ActionTypes.toggleCertificateForProducer,\n    certificate: IProducerNewCertificate\n}\n\nexport const toggleCertificateForProducer = (certificate: IProducerNewCertificate): ToggleCertificateForProducerAction => {\n    return {\n        type: ActionTypes.toggleCertificateForProducer,\n        certificate\n    }\n};","import React from 'react';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport {createStyles, makeStyles, Theme} from \"@material-ui/core/styles\";\nimport {Controller, useForm} from \"react-hook-form\";\nimport {INewProductTagAction, IProductTagAction} from \"../../interfaces/ProductTag\";\nimport {CardContent} from \"@material-ui/core\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport List from \"@material-ui/core/List\";\nimport Typography from \"@material-ui/core/Typography\";\nimport AddIcon from '@material-ui/icons/Add';\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        actionForm: {\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'center',\n            '& > *': {\n                margin: theme.spacing(1),\n            },\n        },\n        cardRoot: {\n            overflow: \"auto\"\n        },\n        cardActions: {\n            justifyContent: 'center'\n        }\n    }),\n);\n\ninterface Props {\n    currentActions: INewProductTagAction[];\n    addAction: Function;\n    toggleAction: Function;\n}\n\nconst ManageActionsForm = (props: Props) => {\n    const classes = useStyles();\n    const {handleSubmit, control, reset} = useForm<IProductTagAction>();\n\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        props.toggleAction({\n            name: event.target.name,\n            selected: event.target.checked\n        });\n    };\n\n    const handleAddAction = handleSubmit(({name}) => {\n        if (!props.currentActions.some(action => action.name === name)) {\n            props.addAction({\n                name,\n                selected: true\n            });\n            reset();\n        }\n    });\n\n    return (\n        <>\n            <CardContent style={{\n                height: \"80%\"\n            }}>\n                <Typography variant=\"h5\" component=\"h2\">\n                    Product Actions\n                </Typography>\n                <FormGroup style={{\n                    height: \"100%\",\n                    display: 'block',\n                    flexDirection: 'row',\n                    alignItems: 'center',\n                }}>\n                    <List>\n                        {props.currentActions.map((action, index) => (\n                            <FormControlLabel key={index}\n                                              control={<Switch checked={action.selected} onChange={handleChange}\n                                                               name={action.name}/>}\n                                              label={action.name}\n                            />\n                        ))}\n                    </List>\n                </FormGroup>\n\n            </CardContent>\n            <CardActions className={classes.cardActions}>\n                <form className={classes.actionForm} onSubmit={handleAddAction}>\n                    <Controller\n                        name=\"name\"\n                        as={\n                            <TextField\n                                variant=\"outlined\"\n                                margin=\"normal\"\n                                required\n                                color=\"secondary\"\n                                size={\"small\"}\n                                id=\"name\"\n                                label=\"Action Name\"\n                                name=\"name\"\n                                // autoFocus\n                            />}\n                        control={control}\n                        defaultValue=\"\"\n                    />\n                    <Button type=\"submit\"\n                            variant=\"contained\"\n                            color=\"secondary\"\n                            endIcon={<AddIcon/>}\n                    >\n                        Add\n                    </Button>\n                </form>\n            </CardActions>\n        </>\n    );\n};\n\nexport default ManageActionsForm;","import {useEffect, useState} from 'react';\n\nfunction getWindowDimensions() {\n    const {innerWidth: width, innerHeight: height} = window;\n    return {\n        width,\n        height\n    };\n}\n\nexport default function useWindowDimensions() {\n    const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\n\n    useEffect(() => {\n        function handleResize() {\n            setWindowDimensions(getWindowDimensions());\n        }\n\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n\n    return windowDimensions;\n}","import React from 'react';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport {createStyles, makeStyles, Theme} from \"@material-ui/core/styles\";\nimport {Controller, useForm} from \"react-hook-form\";\nimport {IProductTagAction} from \"../../interfaces/ProductTag\";\nimport {CardContent} from \"@material-ui/core\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport List from \"@material-ui/core/List\";\nimport Typography from \"@material-ui/core/Typography\";\nimport useWindowDimensions from \"../ui/hooks/useWindowDimensions\";\nimport AddIcon from '@material-ui/icons/Add';\nimport {IProducerNewCertificate} from \"../../interfaces/Producer\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        certificateForm: {\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'center',\n            '& > *': {\n                margin: theme.spacing(1),\n            },\n        },\n        cardRoot: {\n            overflow: \"auto\"\n        },\n        cardCertificate: {\n            justifyContent: 'center'\n        }\n    }),\n);\n\ninterface Props {\n    currentCertificates: IProducerNewCertificate[];\n    addCertificate: Function;\n    toggleCertificate: Function;\n}\n\nconst ManageCertificatesForm = (props: Props) => {\n    const classes = useStyles();\n    const {handleSubmit, control, reset} = useForm<IProductTagAction>();\n    const {height} = useWindowDimensions();\n\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        props.toggleCertificate({\n            name: event.target.name,\n            selected: event.target.checked\n        });\n    };\n\n    const handleAddCertificate = handleSubmit(({name}) => {\n        if (!props.currentCertificates.some(certificate => certificate.name === name)) {\n            props.addCertificate({\n                name,\n                selected: true\n            });\n            reset();\n        }\n    });\n\n    return (\n        <Card style={{\n            height: height - 300\n        }} className={classes.cardRoot}>\n            <CardContent style={{\n                height: \"80%\"\n            }}>\n                <Typography variant=\"h5\" component=\"h2\">\n                    Certificates\n                </Typography>\n                <FormGroup style={{\n                    height: \"100%\",\n                    display: 'block',\n                    flexDirection: 'row',\n                    alignItems: 'center',\n                }}>\n                    <List>\n                        {props.currentCertificates.map((currentCertificates, index) => (\n                            <FormControlLabel key={index}\n                                              control={<Switch checked={currentCertificates.selected}\n                                                               onChange={handleChange}\n                                                               name={currentCertificates.name}/>}\n                                              label={currentCertificates.name}\n                            />\n                        ))}\n                    </List>\n                </FormGroup>\n\n            </CardContent>\n            <CardActions className={classes.cardCertificate}>\n                <form className={classes.certificateForm} onSubmit={handleAddCertificate}>\n                    <Controller\n                        name=\"name\"\n                        as={\n                            <TextField\n                                variant=\"outlined\"\n                                margin=\"normal\"\n                                required\n                                color=\"secondary\"\n                                size={\"small\"}\n                                id=\"name\"\n                                label=\"Certificate Name\"\n                                name=\"name\"\n                                // autoFocus\n                            />}\n                        control={control}\n                        defaultValue=\"\"\n                    />\n                    <Button type=\"submit\"\n                            variant=\"contained\"\n                            color=\"secondary\"\n                            endIcon={<AddIcon/>}\n                    >\n                        Add\n                    </Button>\n                </form>\n            </CardActions>\n        </Card>\n    );\n};\n\nexport default ManageCertificatesForm;","import React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport {connect} from \"react-redux\";\nimport {\n    addCertificateToProducer,\n    addDefaultActionToProducer,\n    signUpProducer,\n    toggleCertificateForProducer,\n    toggleDefaultActionForProducer,\n    updateSignUpFormField\n} from \"../../../../state/actions\";\nimport {useHistory} from \"react-router-dom\";\nimport {StoreState} from \"../../../../state/reducers\";\nimport {ISignUpFormData} from \"../../../../interfaces/Producer\";\nimport ManageActionsForm from \"../../../fragments/ManageActionsForm\";\nimport ManageCertificatesForm from \"../../../fragments/ManageCertificatesForm\";\n\nconst useStyles = makeStyles(theme => ({\n    paper: {\n        marginTop: theme.spacing(2),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        // width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(3),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n    defaultActionsCard: {},\n    cardTitle: {\n        fontSize: 14\n    }\n}));\n\ninterface Props {\n    children?: React.ReactElement;\n    signUpProducer: Function;\n    updateSignUpFormField: typeof updateSignUpFormField;\n    producerAuth: ISignUpFormData;\n    addDefaultActionToProducer: typeof addDefaultActionToProducer;\n    toggleDefaultActionForProducer: typeof toggleDefaultActionForProducer;\n    addCertificateToProducer: typeof addCertificateToProducer;\n    toggleCertificateForProducer: typeof toggleCertificateForProducer;\n}\n\nconst _SignUpForm = (props: Props) => {\n    const classes = useStyles();\n    const history = useHistory();\n\n    const onFormFieldChange = (eventTarget: (EventTarget & HTMLTextAreaElement) | (EventTarget & HTMLInputElement)) => {\n        props.updateSignUpFormField(eventTarget.name, eventTarget.value);\n    };\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline/>\n            <div className={classes.paper}>\n                <Avatar className={classes.avatar}>\n                    <LockOutlinedIcon/>\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    Sign up\n                </Typography>\n\n                <Grid container spacing={2}>\n                    <Grid item xs={12} sm={6}>\n                        <TextField\n                            autoComplete=\"producerName\"\n                            name=\"producerName\"\n                            variant=\"outlined\"\n                            size=\"small\"\n                            required\n                            fullWidth\n                            id=\"producerName\"\n                            label=\"Producer Name\"\n                            autoFocus\n                            value={props.producerAuth.producerName}\n                            onChange={(event) => onFormFieldChange(event.target)}\n                        />\n\n                    </Grid>\n                    <Grid item xs={12} sm={6}>\n                        <TextField\n                            variant=\"outlined\"\n                            required\n                            fullWidth\n                            size=\"small\"\n                            id=\"licenceNumber\"\n                            label=\"Licence Number\"\n                            name=\"licenceNumber\"\n                            autoComplete=\"licenceNumber\"\n                            value={props.producerAuth.licenceNumber}\n                            onChange={(event) => onFormFieldChange(event.target)}\n                        />\n\n                    </Grid>\n                    <Grid item xs={12}>\n                        <TextField\n                            variant=\"outlined\"\n                            required\n                            size=\"small\"\n                            fullWidth\n                            id=\"url\"\n                            label=\"URL\"\n                            name=\"url\"\n                            autoComplete=\"url\"\n                            value={props.producerAuth.url}\n                            onChange={(event) => onFormFieldChange(event.target)}\n                        />\n                    </Grid>\n                    <Grid item xs={12}>\n                        <ManageActionsForm\n                            currentActions={props.producerAuth.defaultActions}\n                            addAction={props.addDefaultActionToProducer}\n                            toggleAction={props.toggleDefaultActionForProducer}\n                        />\n                    </Grid>\n                    <Grid item xs={12}>\n                        <ManageCertificatesForm\n                            currentCertificates={props.producerAuth.certificates}\n                            addCertificate={props.addCertificateToProducer}\n                            toggleCertificate={props.toggleCertificateForProducer}\n                        />\n                    </Grid>\n                    <Grid item xs={12}>\n                        <FormControlLabel\n                            control={<Checkbox value=\"agreeWithTermsAndConditions\" color=\"primary\"/>}\n                            label=\"I agree with terms and conditions\"\n                        />\n                    </Grid>\n                </Grid>\n                <Button\n                    type=\"submit\"\n                    fullWidth\n                    variant=\"contained\"\n                    color=\"primary\"\n                    className={classes.submit}\n                    onClick={() => props.signUpProducer(props.producerAuth, history)}\n                >\n                    Sign Up\n                </Button>\n            </div>\n        </Container>\n    );\n};\n\nconst mapStateToProps = ({producerAuth}: StoreState) => {\n    return {producerAuth};\n};\n\nexport const SignUpForm = connect(\n    mapStateToProps,\n    {\n        signUpProducer,\n        updateSignUpFormField,\n        addDefaultActionToProducer,\n        addCertificateToProducer,\n        toggleDefaultActionForProducer,\n        toggleCertificateForProducer\n    }\n)(_SignUpForm);\n","import React from 'react';\nimport SwipeableViews from 'react-swipeable-views';\nimport {makeStyles, Theme, useTheme} from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport {SignInForm} from \"./SignInForm\";\nimport {SignUpForm} from \"./SignUpForm\";\nimport {isAlreadyAuthenticated} from \"../../../../state/helperFunction\";\nimport {routePaths} from \"../../../../global/constants\";\nimport {useHistory} from \"react-router-dom\";\n\ninterface TabPanelProps {\n    children?: React.ReactNode;\n    dir?: string;\n    index: any;\n    value: any;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n    const {children, value, index, ...other} = props;\n\n    return (\n        <Typography\n            component=\"div\"\n            role=\"tabpanel\"\n            hidden={value !== index}\n            id={`full-width-tabpanel-${index}`}\n            aria-labelledby={`full-width-tab-${index}`}\n            {...other}\n        >\n            {value === index && <Box p={1}>{children}</Box>}\n        </Typography>\n    );\n}\n\nfunction a11yProps(index: any) {\n    return {\n        id: `full-width-tab-${index}`,\n        'aria-controls': `full-width-tabpanel-${index}`,\n    };\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    root: {\n        marginTop: theme.spacing(2),\n        backgroundColor: theme.palette.background.paper\n    },\n}));\n\nconst ProducerAuth = () => {\n    const classes = useStyles();\n    const theme = useTheme();\n    const history = useHistory();\n    const [value, setValue] = React.useState(1);\n\n    if (isAlreadyAuthenticated()){\n        history.push(routePaths.producer)\n    }\n\n\n    const handleChange = (event: React.ChangeEvent<{}>, newValue: number) => {\n        const updatedIndex = newValue < 0 ? 0 : newValue;  // todo no idea why it adds 1 when we swipe left\n        setValue(updatedIndex);\n    };\n\n    const handleChangeIndex = (index: number) => {\n        const updatedIndex = index < 0 ? 0 : index - 1;  // todo no idea why it adds 1 when we swipe left\n        setValue(updatedIndex);\n    };\n\n    return (\n        <div className={classes.root}>\n            <AppBar position=\"static\" color=\"default\">\n                <Tabs\n                    value={value}\n                    onChange={handleChange}\n                    indicatorColor=\"primary\"\n                    textColor=\"primary\"\n                    variant=\"fullWidth\"\n                    aria-label=\"full width tabs example\"\n                >\n                    <Tab label=\"SignIn\" {...a11yProps(0)} />\n                    <Tab label=\"SignUp\" {...a11yProps(1)} />\n                </Tabs>\n            </AppBar>\n            <SwipeableViews\n                axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n                index={value}\n                onChangeIndex={handleChangeIndex}\n            >\n                <TabPanel value={value} index={0} dir={theme.direction}>\n                    <SignInForm/>\n                </TabPanel>\n                <TabPanel value={value} index={1} dir={theme.direction}>\n                    <SignUpForm/>\n                </TabPanel>\n            </SwipeableViews>\n        </div>\n    );\n};\n\nexport default ProducerAuth;","import React from 'react';\nimport Container from \"@material-ui/core/Container\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Link from \"@material-ui/core/Link\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles(theme => ({\n    footer: {\n        // padding: theme.spacing(3, 2),\n        marginTop: 'auto',\n        backgroundColor:\n            theme.palette.type === 'dark' ? theme.palette.grey[800] : theme.palette.grey[200],\n    },\n}));\n\nfunction Copyright() {\n    return (\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n            {'Copyright  '}\n            <Link color=\"inherit\" href=\"http://www.csg.uzh.ch/csg/en/research/Foodchains.html\">\n                CSG\n            </Link>{' '}\n            {new Date().getFullYear()}\n            {'.'}\n        </Typography>\n    );\n}\n\nconst Footer = () => {\n    const classes = useStyles();\n    return (\n        <footer className={classes.footer}>\n            <Container maxWidth=\"sm\">\n                <Copyright/>\n            </Container>\n        </footer>\n    );\n};\n\nexport default Footer;","import React from 'react';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\nimport {connect} from \"react-redux\";\nimport {StoreState} from \"../../state/reducers\";\nimport {Ui} from \"../../state/actions\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        backdrop: {\n            zIndex: theme.zIndex.drawer + 1,\n            color: '#fafff1',\n        },\n    }),\n);\n\ninterface Props {\n    ui: Ui\n}\n\nconst _Backdrop = (props: Props) => {\n    const classes = useStyles();\n    return (\n        <Backdrop className={classes.backdrop} open={props.ui.isLoading}>\n            <CircularProgress color=\"inherit\"/>\n        </Backdrop>\n    );\n};\n\nconst mapStateToProps = ({ui}: StoreState): { ui: Ui } => {\n    return {ui};\n};\n\nexport const LoadingBackdrop = connect(\n    mapStateToProps,\n    {}\n)(_Backdrop);\n","import React from 'react';\n\nconst PtScanner = () => {\n    return (\n        <div>\n            Scanning dsfsd\n        </div>\n    );\n};\n\nexport default PtScanner;","import React, {Component} from 'react';\nimport {Redirect, Route} from 'react-router-dom';\nimport {routePaths} from \"../global/constants\";\nimport {StoreState} from \"../state/reducers\";\nimport {connect} from \"react-redux\";\n\n\nconst _PrivateRoute = ({component: Component, signInOnStartup, producer, ...rest}) => {\n    return (\n        <Route\n            {...rest}\n            render={props =>\n                producer.isAuthenticated ? (\n                    <Component {...props} />\n                ) : (\n                    <Redirect\n                        to={{\n                            pathname: routePaths.producerAuthPage\n                        }}\n                    />\n                )\n            }\n        />\n    );\n};\n\nconst mapStateToProps = ({producer}: StoreState) => {\n    return {producer};\n};\n\nexport const PrivateRoute = connect(\n    mapStateToProps,\n    {}\n)(_PrivateRoute);\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport CameraIcon from '@material-ui/icons/Camera';\nimport HistoryIcon from '@material-ui/icons/History';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport theme from \"../../ui/Theme\";\nimport {Link} from \"react-router-dom\";\nimport {routePaths} from \"../../../global/constants\";\n\nconst useStyles = makeStyles({\n    root: {\n        // width: 500,\n    },\n    stickToBottom: {\n        width: '100%',\n        position: 'fixed',\n        bottom: 0,\n        marginLeft: theme.spacing(-2),\n        // backgroundColor: \"#8e9d90\",\n        // marginBottom: theme.spacing(2.5),\n    }\n});\n\nconst ProducerBottomTagNavigation = () => {\n    const classes = useStyles();\n    const [value, setValue] = React.useState(0);\n    return (\n        <BottomNavigation\n            value={value}\n            onChange={(event, newValue) => {\n                setValue(newValue);\n            }}\n            showLabels\n            className={classes.stickToBottom}\n        >\n            <BottomNavigationAction component={Link} to={routePaths.createProductTag} label=\"New PT\"\n                                    icon={<CameraIcon/>}/>\n            <BottomNavigationAction component={Link} to={routePaths.producerHistoryPage} label=\"History\"\n                                    icon={<HistoryIcon/>}/>\n            <BottomNavigationAction component={Link} to={routePaths.producerSettings} label=\"Settings\"\n                                    icon={<SettingsIcon/>}/>\n        </BottomNavigation>\n    );\n};\n\nexport default ProducerBottomTagNavigation;","import {ActionTypes} from \"./types\";\nimport {IProductTag} from \"../../interfaces/ProductTag\";\nimport {Dispatch} from \"redux\";\nimport {toggleIsLoading, ToggleIsLoadingAction} from \"./ui\";\nimport {fetchPT} from \"./productTag\";\n\n\nexport interface ToggleMapViewModalAction {\n    type: ActionTypes.toggleMapViewModal;\n    isMapViewModalOpen: boolean;\n}\n\nexport interface ShowMapViewForProductTagAction {\n    type: ActionTypes.showMapViewForProductTag\n    productTag: IProductTag\n}\n\nexport interface StoreMainProductTagToMapViewAction {\n    type: ActionTypes.storeMainProductTagToMapView\n    productTag: IProductTag\n}\n\nexport interface AddFetchedPreviousProductTagForMapViewAction {\n    type: ActionTypes.addFetchedPreviousProductTagForMapView\n    productTag: IProductTag\n}\n\nexport const toggleMapViewModal = (isMapViewModalOpen: boolean): ToggleMapViewModalAction => {\n    return {\n        type: ActionTypes.toggleMapViewModal,\n        isMapViewModalOpen\n    }\n};\n\nexport const storeMainProductTagToMapView = (productTag: IProductTag): StoreMainProductTagToMapViewAction => {\n    return {\n        type: ActionTypes.storeMainProductTagToMapView,\n        productTag\n    }\n};\n\nexport const addFetchedPreviousProductTagForMapView = (productTag: IProductTag): AddFetchedPreviousProductTagForMapViewAction => {\n    return {\n        type: ActionTypes.addFetchedPreviousProductTagForMapView,\n        productTag\n    }\n};\n\nexport const showMapViewForProductTag = (productTag: IProductTag) => {\n    return async (dispatch: Dispatch) => {\n        dispatch<ToggleIsLoadingAction>(toggleIsLoading(true));\n        dispatch<StoreMainProductTagToMapViewAction>(storeMainProductTagToMapView(productTag));\n        await traversePreviousProductTagsTree(productTag, dispatch);\n        dispatch<ToggleIsLoadingAction>(toggleIsLoading(false));\n    }\n};\n\nconst traversePreviousProductTagsTree = async (productTag: IProductTag, dispatch: Dispatch) => {\n    await asyncForEach(productTag.previousProductTags, async (productTag) => {\n        const result = await fetchPT(dispatch, productTag.productTagAddress);\n        dispatch<AddFetchedPreviousProductTagForMapViewAction>(addFetchedPreviousProductTagForMapView(result));\n        await asyncForEach(result.previousProductTags, async (prevPt) => {\n            const result = await fetchPT(dispatch, prevPt.productTagAddress);\n            dispatch<AddFetchedPreviousProductTagForMapViewAction>(addFetchedPreviousProductTagForMapView(result));\n        });\n    });\n};\n\nconst asyncForEach = async (array, callback) => {\n    for (let index = 0; index < array.length; index++) {\n        await callback(array[index], index, array);\n    }\n};","import React from 'react';\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport {Card} from \"@material-ui/core\";\nimport {createStyles, makeStyles, Theme} from \"@material-ui/core/styles\";\nimport {INewProductTagAction, IProductTagAction} from \"../../interfaces/ProductTag\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        cardRoot: {\n            margin: 7,\n            width: \"100%\",\n            overflow: \"auto\"\n        },\n        cardTitle: {\n            fontSize: 16,\n        }\n    }),\n);\n\ninterface Props {\n    actions: IProductTagAction[] | INewProductTagAction[];\n}\n\nconst ActionsOverviewCard = (props: Props) => {\n    const classes = useStyles();\n    const {actions} = props;\n    // @ts-ignore\n    const filteredActions = actions.length > 0 && actions[0].selected !== undefined ? actions.filter(action => action.selected).map(action => action.name) : actions.map(action => action);\n    return (\n        <Card className={classes.cardRoot}>\n            <CardContent>\n                <Typography className={classes.cardTitle} color=\"textSecondary\" gutterBottom>\n                    Actions\n                </Typography>\n                <List dense={true}>\n                    {filteredActions.map((actionName, index) => {\n                            return React.cloneElement(\n                                <ListItem key={index}>\n                                    <ListItemText\n                                        primary={(index + 1) + `. ` + actionName}\n                                    />\n                                </ListItem>,\n                                {\n                                    key: actionName,\n                                })\n                        }\n                    )}\n                </List>\n            </CardContent>\n        </Card>\n    );\n};\n\nexport default ActionsOverviewCard;","import React from 'react';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport {StoreState} from \"../../state/reducers\";\nimport {connect} from \"react-redux\";\nimport {geolocated} from \"react-geolocated\";\nimport {INewProductTag} from \"../../interfaces/ProductTag\";\nimport Button from \"@material-ui/core/Button\";\nimport {showMapViewForProductTag} from \"../../state/actions/mapView\";\nimport {Divider} from \"@material-ui/core\";\nimport ExpansionPanelActions from \"@material-ui/core/ExpansionPanelActions\";\nimport {IScannedProducerReducer} from \"../../state/reducers/scannedProducers\";\nimport ActionsOverviewCard from \"../fragments/ActionsOverviewCard\";\nimport TextField from \"@material-ui/core/TextField\";\nimport {variableNames} from \"../../global/constants\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        root: {\n            overflow: \"auto\",\n            width: '100%',\n        },\n        heading: {\n            fontSize: theme.typography.pxToRem(15),\n            flexBasis: '33.33%',\n            flexShrink: 0,\n        },\n        secondaryHeading: {\n            fontSize: theme.typography.pxToRem(15),\n            color: theme.palette.text.secondary,\n        },\n        contractAddressForm: {\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'center',\n            // '& > *': {\n            //     margin: theme.spacing(1),\n            // },\n        }\n    }),\n);\n\ninterface Props {\n    newProductTag: INewProductTag;\n    scannedProducers: IScannedProducerReducer;\n    showMapViewForProductTag: Function;\n}\n\nconst _ScannedProductTagsPanel = (props: Props) => {\n    const classes = useStyles();\n    const [expanded, setExpanded] = React.useState<string | false>(false);\n\n    const {producers} = props.scannedProducers;\n\n    const handleChange = (panel: string) => (event: React.ChangeEvent<{}>, isExpanded: boolean) => {\n        setExpanded(isExpanded ? panel : false);\n    };\n\n    return (\n        <div className={classes.root}>\n            {props.newProductTag.previousProductTags.map((productTag, index) => (\n                <ExpansionPanel key={index} expanded={expanded === productTag.productTagAddress}\n                                onChange={handleChange(productTag.productTagAddress)}>\n                    <ExpansionPanelSummary\n                        expandIcon={<ExpandMoreIcon/>}\n                        aria-controls=\"panel1bh-content\"\n                        id=\"panel1bh-header\"\n                    >\n                        <Typography\n                            className={classes.heading}>{productTag.dateTime.day}/{productTag.dateTime.month}/{productTag.dateTime.year.toString().substring(2, 4)}</Typography>\n                        {producers.map((producer, index) => {\n                            if (producer.producerContractAddress === productTag.producerAddress) {\n                                return <Typography key={index}\n                                                   className={classes.secondaryHeading}\n                                >\n                                    {producer.producerName}\n                                </Typography>;\n                            } // todo improve this method\n                        })}\n                    </ExpansionPanelSummary>\n                    <ExpansionPanelDetails>\n                        <ActionsOverviewCard actions={productTag.actions}/>\n                    </ExpansionPanelDetails>\n                    <ExpansionPanelDetails>\n                        <div className={classes.contractAddressForm}>\n                            <TextField\n                                style={{marginRight: \"10px\"}}\n                                id=\"outlined-basic\"\n                                label=\"Contract Address\"\n                                variant=\"outlined\"\n                                value={productTag.productTagAddress}\n                                disabled={true}\n                                size={\"medium\"}\n                            />\n                            <Button\n                                size={\"small\"}\n                                variant=\"outlined\"\n                                onClick={() => {\n                                    window.open(\n                                        `${variableNames.etherscanBaseURL}/address/${productTag.productTagAddress}`,\n                                        '_blank'\n                                    );\n                                }}\n                            >\n                                Show on Etherscan\n                            </Button>\n\n                        </div>\n                    </ExpansionPanelDetails>\n                    <Divider/>\n                    <ExpansionPanelActions>\n                        <Button\n                            variant=\"outlined\"\n                            onClick={() => props.showMapViewForProductTag(productTag)}\n                        >\n                            Show on map\n                        </Button>\n                    </ExpansionPanelActions>\n                    <Divider/>\n                    <Divider/>\n                    <div style={{\n                        marginTop: \"70px\"\n                    }}/>\n                </ExpansionPanel>\n            ))}\n\n        </div>\n    );\n};\n\nconst mapStateToProps = ({newProductTag, scannedProducers}: StoreState) => {\n    return {newProductTag, scannedProducers};\n};\n\nexport const ScannedProductTagsPanel = connect(\n    mapStateToProps,\n    {\n        showMapViewForProductTag\n    }\n)(geolocated()(_ScannedProductTagsPanel));\n","import React from 'react';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\nimport {StoreState} from \"../../../state/reducers\";\nimport {connect} from \"react-redux\";\nimport {Ui} from \"../../../state/actions\";\nimport {INewProductTag} from \"../../../interfaces/ProductTag\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport {ScannedProductTagsPanel} from \"../ScannedProductTagsPanel\";\nimport { Route } from 'react-router-dom';\nimport {Button} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        cardRoot: {\n            overflow: \"auto\"\n        },\n        bullet: {\n            display: 'inline-block',\n            margin: '0 2px',\n            transform: 'scale(0.8)',\n        },\n        title: {\n            fontSize: 14,\n        },\n        pos: {\n            marginBottom: 12,\n        },\n        cardActions: {\n            justifyContent: 'center'\n        }\n    }),\n);\n\ninterface Props {\n    newProductTag: INewProductTag\n    ui: Ui\n}\n\nconst _ScanProductTags = (props: Props) => {\n    const classes = useStyles();\n\n    return (\n        <>\n            <CardContent>\n                <Typography variant=\"h5\" component=\"h2\">\n                    Scanned Products\n                </Typography>\n            </CardContent>\n            <CardContent style={{\n                height: \"65%\"\n            }}>\n                <ScannedProductTagsPanel/>\n            </CardContent>\n            <CardActions style={{\n                position: \"absolute\"\n            }} className={classes.cardActions}>\n            </CardActions>\n        </>\n    );\n};\n\n\nconst mapStateToProps = ({newProductTag, ui}: StoreState) => {\n    return {newProductTag, ui};\n};\n\nexport const ScanProductTags = connect(\n    mapStateToProps,\n    {}\n)(_ScanProductTags);\n","import React from 'react';\nimport {Card} from \"@material-ui/core\";\nimport {INewProductTag, IProductTag} from \"../../interfaces/ProductTag\";\nimport {createStyles, makeStyles, Theme} from \"@material-ui/core/styles\";\n\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {ScannedProductTagsPanel} from \"../product_tag/ScannedProductTagsPanel\";\nimport ActionsOverviewCard from \"./ActionsOverviewCard\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        demo: {\n            backgroundColor: theme.palette.background.paper,\n        },\n        cardTitle: {\n            fontSize: 16,\n        }\n    }),\n);\n\ninterface Props {\n    productTag: INewProductTag | IProductTag;\n}\n\nconst ProductTagDetails = (props: Props) => {\n    const classes = useStyles();\n    const {actions} = props.productTag;\n\n    return (\n        <div className={classes.demo}>\n            <CardContent>\n                <Typography variant=\"h5\" component=\"h2\">\n                    Product Tag Overview\n                </Typography>\n            </CardContent>\n\n            <ActionsOverviewCard actions={actions}/>\n\n            <Card style={{\n                margin: 7\n            }}>\n                <CardContent>\n                    <Typography className={classes.cardTitle} color=\"textSecondary\" gutterBottom>\n                        Previous Product Tags\n                    </Typography>\n                    <ScannedProductTagsPanel/>\n                </CardContent>\n            </Card>\n\n        </div>\n    );\n};\n\n\nexport default ProductTagDetails;","import React from 'react';\nimport {StoreState} from \"../../../state/reducers\";\nimport {connect} from \"react-redux\";\nimport {INewProductTag} from \"../../../interfaces/ProductTag\";\nimport ProductTagDetails from \"../../fragments/ProductTagDetails\";\n\n\ninterface Props {\n    children?: React.ReactElement;\n    newProductTag: INewProductTag;\n}\n\nconst _NewPTOverview = (props: Props) => {\n    return (\n        <ProductTagDetails productTag={props.newProductTag}/>\n    );\n};\n\nconst mapStateToProps = ({newProductTag}: StoreState) => {\n    return {newProductTag};\n};\n\nexport const NewPTOverview = connect(\n    mapStateToProps,\n    {}\n)(_NewPTOverview);\n","import React from 'react';\nimport {IGeneratedProductTag} from \"../../interfaces/ProductTag\";\nimport {QRCode} from 'react-qr-svg';\n\ninterface Props {\n    generatedProductTag: IGeneratedProductTag;\n    children?: React.ReactElement;\n}\n\nexport class QrCodeToPrint extends React.Component<Props> {\n    render() {\n        return (\n            <div style={{\n                order: 1\n            }}>\n                <QRCode\n                    bgColor=\"#FFFFFF\"\n                    fgColor=\"#000000\"\n                    level=\"Q\"\n                    style={{\n                        width: \"76%\",\n                        marginLeft: \"12%\",\n                        marginBottom: \"15px\"\n                    }}\n                    value={this.props.generatedProductTag.address}\n                />\n            </div>\n        );\n    }\n}","import React, {useRef} from 'react';\nimport {StoreState} from \"../../../state/reducers\";\nimport {connect} from \"react-redux\";\nimport {geolocated} from \"react-geolocated\";\nimport {IGeneratedProductTag} from \"../../../interfaces/ProductTag\";\nimport ReactToPrint from \"react-to-print\";\nimport {QrCodeToPrint} from \"../../fragments/QRCodeToPrint\";\nimport {Button} from \"@material-ui/core\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\n\n\ninterface Props {\n    generatedProductTag: IGeneratedProductTag\n}\n\nconst _PrintQrCode = (props: Props) => {\n\n    const componentRef = useRef<HTMLDivElement>(null);\n\n\n    return (\n        <>\n            <CardContent>\n                <Typography variant=\"h5\" component=\"h2\">\n                    Generated QR Code\n                </Typography>\n            </CardContent>\n            <div style={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                alignItems: \"center\"\n            }}>\n                <ReactToPrint\n                    content={() => componentRef.current}\n                    trigger={() =>\n                        <Button\n                            style={{\n                                order: 2\n                            }}\n                            variant={\"contained\"}\n                            color=\"secondary\"\n                        >\n                            Print QR Code\n                        </Button>}\n                />\n                <QrCodeToPrint\n                    generatedProductTag={props.generatedProductTag}\n                    // @ts-ignore\n                    ref={componentRef}\n                />\n\n            </div>\n        </>\n    );\n};\n\nconst mapStateToProps = ({generatedProductTag}: StoreState) => {\n    return {generatedProductTag};\n};\n\nexport const PrintShareQRCode = connect(\n    mapStateToProps,\n    {}\n)(geolocated()(_PrintQrCode));\n\n","import React from 'react';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport Button from '@material-ui/core/Button';\nimport ManageActionsForm from \"../fragments/ManageActionsForm\";\nimport {ScanProductTags} from \"./steps/ScanProductTags\";\nimport {NewPTOverview} from \"./steps/NewPTOverview\";\nimport {connect} from \"react-redux\";\nimport {StoreState} from \"../../state/reducers\";\nimport {\n    addActionToNewProductTag,\n    generateProductTag,\n    setNewProductTagActiveStep,\n    toggleActionOfNewProductTag,\n    toggleQRScannerModal,\n    Ui\n} from \"../../state/actions\";\nimport {IGeolocation, INewProductTag} from \"../../interfaces/ProductTag\";\nimport {geolocated, GeolocatedProps} from \"react-geolocated\";\nimport {PrintShareQRCode} from \"./steps/PrintShareQRCode\";\nimport ArrowLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ArrowRightIcon from '@material-ui/icons/ChevronRight';\nimport {Card} from \"@material-ui/core\";\nimport useWindowDimensions from \"../ui/hooks/useWindowDimensions\";\nimport CameraIcon from \"@material-ui/icons/Camera\";\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        stepperRoot: {\n            height: theme.spacing(10),\n            paddingTop: theme.spacing(1)\n        },\n        cardRoot: {\n            height: theme.spacing(35),\n            overflow: \"auto\"\n        },\n        root: {\n            width: '100%',\n        },\n        buttonBack: {\n            float: \"left\"\n        },\n        buttonNext: {\n            float: \"right\"\n        },\n        scanPTButton: {\n            // margin: theme.spacing(1),\n            marginLeft: \"5%\"\n        },\n        instructions: {\n            marginTop: theme.spacing(1),\n            marginBottom: theme.spacing(1)\n        },\n    }),\n);\n\nfunction getStepContent(props: Props, step: number) {\n    switch (step) {\n        case 0:\n            return <ScanProductTags/>;\n        case 1:\n            return <ManageActionsForm\n                currentActions={props.newProductTag.actions}\n                addAction={props.addActionToNewProductTag}\n                toggleAction={props.toggleActionOfNewProductTag}\n            />;\n        case 2:\n            return <NewPTOverview/>;\n        case 3:\n            return <PrintShareQRCode/>;\n        default:\n            return 'Unknown step';\n    }\n}\n\nfunction getForwardButtonText(step) {\n    switch (step) {\n        case 0:\n            return \"Actions\";\n        case 1:\n            return \"Overview\";\n        case 2:\n            return \"Create\";\n        case 3:\n            return \"New Product Tag\";\n        default:\n            return 'Unknown step';\n    }\n}\n\ninterface Props extends GeolocatedProps {\n    children?: React.ReactElement;\n    generateProductTag: Function;\n    newProductTag: INewProductTag;\n    ui: Ui;\n    addActionToNewProductTag: typeof addActionToNewProductTag;\n    toggleActionOfNewProductTag: typeof toggleActionOfNewProductTag;\n    setNewProductTagActiveStep: typeof setNewProductTagActiveStep;\n    toggleQRScannerModal: typeof toggleQRScannerModal\n}\n\n\nconst _NewProductTag = (props: Props) => {\n    const classes = useStyles();\n    const steps = props.ui.newProductTagSteps.steps;\n    const {height} = useWindowDimensions();\n\n    const activeStep = props.ui.newProductTagSteps.activeStep;\n\n    const getGeolocation = (): IGeolocation => {\n        return {\n            longitude: props.coords?.longitude === undefined ? 0 : props.coords.longitude,\n            latitude: props.coords?.latitude === undefined ? 0 : props.coords.latitude\n        }\n    };\n\n    const handleNext = () => {\n        if (activeStep === 2) {\n            props.generateProductTag({\n                ...props.newProductTag,\n                geolocation: getGeolocation()\n                // geolocation: {\n                //     longitude: 8.5417,\n                //     latitude: 47.3769\n                // }\n            });\n        } else if (activeStep === steps.length - 1) {\n            props.setNewProductTagActiveStep(0);\n        } else {\n            props.setNewProductTagActiveStep(activeStep + 1);\n        }\n    };\n\n    const handleBack = () => {\n        props.setNewProductTagActiveStep(activeStep - 1);\n    };\n    //\n    // const handleReset = () => {\n    //     props.setNewProductTagActiveStep(0);\n    // };\n\n    return (\n        <div className={classes.root}>\n            <Stepper className={classes.stepperRoot} alternativeLabel activeStep={activeStep}>\n                {steps.map(label => (\n                    <Step key={label}>\n                        <StepLabel>{label}</StepLabel>\n                    </Step>\n                ))}\n            </Stepper>\n            <>\n                <div className={classes.instructions}>\n                    <Card style={{\n                        height: height - 300\n                    }} className={classes.cardRoot}>\n                        {getStepContent(props, activeStep)}\n                    </Card>\n                </div>\n                <div style={{\n                    // display: \"flex\",\n                    justifyContent: \"center\",\n                }}>\n                    <Button\n                        style={{\n                            width: \"30%\",\n                            marginRight: \"5%\",\n                            float: activeStep === 0 ? \"none\" : \"left\"\n                        }}\n                        variant=\"outlined\"\n                        disabled={activeStep === 0}\n                        onClick={handleBack}\n                        // className={classes.buttonBack}\n                        startIcon={<ArrowLeftIcon/>}\n                    >\n                        Back\n                    </Button>\n                    {activeStep === 0 ?\n                        <Button\n                            style={{\n                                width: \"30%\"\n                            }}\n                            variant=\"contained\"\n                            color=\"secondary\"\n                            // className={classes.scanPTButton}\n                            startIcon={<CameraIcon/>}\n                            onClick={() => props.toggleQRScannerModal(true)}\n                        >\n                            Scan\n                        </Button>\n                        : null}\n                    <Button\n                        style={{\n                            width: activeStep === 0 ? \"30%\" : \"40%\",\n                            marginLeft: \"5%\",\n                            float: activeStep === 0 ? \"none\" : \"right\"\n                        }}\n                        variant={activeStep === 2 ? \"contained\" : \"outlined\"}\n                        color={activeStep === 2 ? \"secondary\" : \"inherit\"}\n                        onClick={handleNext}\n                        // className={classes.buttonNext}\n                        endIcon={<ArrowRightIcon/>}\n                    >\n                        {getForwardButtonText(activeStep)}\n                    </Button>\n                </div>\n            </>\n        </div>\n    );\n};\n\nconst mapStateToProps = ({newProductTag, ui}: StoreState) => {\n    return {newProductTag, ui};\n};\n\nexport const NewProductTagScreen = connect(\n    mapStateToProps,\n    {\n        generateProductTag,\n        addActionToNewProductTag,\n        toggleActionOfNewProductTag,\n        setNewProductTagActiveStep,\n        toggleQRScannerModal\n    }\n)(geolocated()(_NewProductTag));\n","import {ActionTypes} from \"./types\";\nimport {INewProductTag, INewProductTagAction, IProductTag} from \"../../interfaces/ProductTag\";\nimport {Dispatch} from \"redux\";\nimport {\n    setNewProductTagActiveStep,\n    SetNewProductTagActiveStepAction,\n    toggleIsLoading,\n    ToggleIsLoadingAction\n} from \"./ui\";\nimport web3 from \"../../ethereum/web3\";\nimport {History} from 'history';\nimport ProducerContract from \"../../ethereum/producer\"\nimport {getItemFromLocalStorage} from \"../localStorage\";\nimport {variableNames} from \"../../global/constants\";\nimport {fetchPT} from \"./productTag\";\nimport {store} from \"../../index\";\nimport {saveGeneratedProductTagAddress, SaveGeneratedProductTagAddressAction} from \"./generatedProductTag\";\nimport {IProducer} from \"../../interfaces/Producer\";\n\nexport interface GenerateProductTagAction {\n    type: ActionTypes.generateProductTag;\n    productTag: INewProductTag\n}\n\nexport interface ToggleActionOfNewProductTagAction {\n    type: ActionTypes.toggleActionOfNewProductTag,\n    action: INewProductTagAction\n}\n\nexport interface AddActionToNewProductTagAction {\n    type: ActionTypes.addActionToNewProductTag;\n    newAction: INewProductTagAction\n}\n\nexport interface ResetProductTagUponCreationAction {\n    type: ActionTypes.resetProductTagUponCreation;\n}\n\nexport interface FetchPreviousProductTagAction {\n    type: ActionTypes.fetchPreviousProductTag;\n    productTag: IProductTag\n}\n\nexport interface AddPreviousProductTagAction {\n    type: ActionTypes.addPreviousProductTag;\n    productTag: IProductTag\n}\n\nexport const addActionToNewProductTag = (newAction: INewProductTagAction): AddActionToNewProductTagAction => {\n    return {\n        type: ActionTypes.addActionToNewProductTag,\n        newAction\n    }\n};\n\nexport const toggleActionOfNewProductTag = (action: INewProductTagAction): ToggleActionOfNewProductTagAction => {\n    return {\n        type: ActionTypes.toggleActionOfNewProductTag,\n        action\n    }\n};\n\nexport const resetProductTagUponCreation = (): ResetProductTagUponCreationAction => {\n    return {\n        type: ActionTypes.resetProductTagUponCreation\n    }\n};\n\nexport const fetchPreviousProductTag = (productTagContractAddress: string) => {\n    return async (dispatch: Dispatch) => {\n        dispatch<ToggleIsLoadingAction>(toggleIsLoading(true));\n\n        if (!store.getState().newProductTag.previousProductTags.some(productTag => productTag.productTagAddress === productTagContractAddress)) {\n            const productTag = await fetchPT(dispatch, productTagContractAddress);\n            dispatch<AddPreviousProductTagAction>({\n                type: ActionTypes.addPreviousProductTag,\n                productTag\n            });\n        } else {\n            console.log(\"Pt scanned...\");\n            // todo display modal\n        }\n\n        dispatch<ToggleIsLoadingAction>(toggleIsLoading(false));\n    }\n};\n\n\nexport const generateProductTag = (productTag: INewProductTag, history: History) => {\n    return async (dispatch: Dispatch) => {\n        dispatch<ToggleIsLoadingAction>(toggleIsLoading(true));\n\n        try {\n            const accounts = await web3.eth.getAccounts();\n            const dateTime = new Date();\n            const genProductTag = {\n                ...productTag,\n                dateTime: {\n                    year: dateTime.getFullYear(),\n                    month: dateTime.getMonth() + 1,\n                    day: dateTime.getDate(),\n                    hour: dateTime.getHours(),\n                    minute: dateTime.getMinutes()\n                }\n            };\n\n            console.log(\"generating pt: \", genProductTag);\n            const producer: IProducer = getItemFromLocalStorage(variableNames.producer);\n\n            const methodToCall = ProducerContract(producer.producerContractAddress)\n                .methods.generateProductTag(\n                    productTag.actions.filter(action => action.selected).map(action => action.name),\n                    {\n                        longitude: productTag.geolocation.longitude.toString(),\n                        latitude: productTag.geolocation.latitude.toString(),\n                    },\n                    genProductTag.dateTime,\n                    productTag.previousProductTags.map(pt => pt.productTagAddress)\n                );\n\n            const productTagAddress = await methodToCall.call({from: accounts[0]});\n            console.log(\"generated pt address\", productTagAddress);\n            await methodToCall.send({from: accounts[0]});\n            dispatch<SaveGeneratedProductTagAddressAction>(saveGeneratedProductTagAddress(productTagAddress));\n            dispatch<ResetProductTagUponCreationAction>(resetProductTagUponCreation());\n            dispatch<SetNewProductTagActiveStepAction>(setNewProductTagActiveStep(3));\n        } catch (e) {\n            console.error(e);\n        } finally {\n            dispatch<ToggleIsLoadingAction>(toggleIsLoading(false));\n        }\n    }\n};","import {ActionTypes} from \"./types\";\n\n\nexport interface SaveGeneratedProductTagAddressAction {\n    type: ActionTypes.saveGeneratedProductTagAddress;\n    address: string;\n}\n\nexport const saveGeneratedProductTagAddress = (address: string): SaveGeneratedProductTagAddressAction => {\n    return {\n        type: ActionTypes.saveGeneratedProductTagAddress,\n        address\n    }\n};\n","import React from 'react';\n\nconst ProductTagHistory = () => {\n    return (\n        <div>\n            Product tag history\n        </div>\n    );\n};\n\nexport default ProductTagHistory;","import React from 'react';\n\nconst ProducerSettings = () => {\n    return (\n        <div>\n            Producer Settings\n        </div>\n    );\n};\n\nexport default ProducerSettings;","import React from 'react';\nimport ProducerBottomTagNavigation from \"./ProducerBottomTagNavigation\";\nimport {routePaths} from \"../../../global/constants\";\nimport {PrivateRoute} from \"../../PrivateRoute\";\nimport {NewProductTagScreen} from \"../../product_tag/NewProductTagScreen\";\nimport ProductTagHistory from \"../../product_tag/ProductTagHistory\";\nimport ProducerSettings from \"./ProducerSettings\";\nimport theme from \"../../ui/Theme\";\n\nconst Producer = (props) => {\n    return (\n        <>\n            <div style={{\n                marginTop: theme.spacing(2)\n            }}>\n                {props.location.pathname === routePaths.producer ? <NewProductTagScreen/> : null}\n                <PrivateRoute path=\"/producer/:subroute\" component={subroute}/>\n            </div>\n            <ProducerBottomTagNavigation/>\n        </>\n    );\n};\n\nconst subroute = ({match}) => {\n    switch (match.url) {\n        case routePaths.createProductTag:\n            return <NewProductTagScreen/>;\n        case routePaths.producerHistoryPage:\n            return <ProductTagHistory/>;\n        case routePaths.producerSettings:\n            return <ProducerSettings/>;\n        default:\n            return <div>Not Found</div>\n    }\n};\n\nexport default Producer;","import React from 'react';\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport Fade from \"@material-ui/core/Fade\";\nimport Modal from \"@material-ui/core/Modal\";\nimport {StoreState} from \"../../state/reducers\";\nimport {connect} from \"react-redux\";\nimport {fetchPreviousProductTag, toggleQRScannerModal, Ui} from \"../../state/actions\";\nimport {createStyles, makeStyles, Theme} from \"@material-ui/core/styles\";\nimport QrReader from 'react-qr-reader'\nimport {isAddressValid} from \"../../ethereum/helpers\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        modal: {\n            width: \"80%\",\n            height: \"40%\",\n            marginLeft: \"10%\",\n            marginTop: \"30%\",\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n        },\n        paper: {\n            width: \"100%\",\n            height: \"100%\",\n            backgroundColor: theme.palette.background.paper,\n            border: '2px solid #000',\n            boxShadow: theme.shadows[5],\n            padding: theme.spacing(2, 4, 3),\n        },\n    }),\n);\n\ninterface Props {\n    ui: Ui\n    fetchPreviousProductTag: Function\n    toggleQRScannerModal: typeof toggleQRScannerModal\n}\n\nconst _QrScannerModal = (props: Props) => {\n    const classes = useStyles();\n\n    const handleOnScan = (data: string) => {\n        if (isAddressValid(data)) {\n            props.fetchPreviousProductTag(data);\n            props.toggleQRScannerModal(false)\n        }\n    };\n\n    return (\n        <Modal\n            aria-labelledby=\"transition-modal-title\"\n            aria-describedby=\"transition-modal-description\"\n            className={classes.modal}\n            open={props.ui.isQRScannerModalOpen}\n            onClose={() => props.toggleQRScannerModal(false)}\n            closeAfterTransition\n            BackdropComponent={Backdrop}\n            BackdropProps={{\n                timeout: 500,\n            }}\n        >\n            <Fade in={props.ui.isQRScannerModalOpen}>\n                <div className={classes.paper}>\n                    <QrReader\n                        delay={300}\n                        onError={(error) => console.error(\"error: \", error)}\n                        onScan={(data) => {\n                            handleOnScan(\"0xa045f0E8C3C20525FFE742277BaD45E33f3Be961\"); // bern\n                            handleOnScan(\"0x1Fb387A826F12920afE9100C1764B6eFfFec1C74\"); // winterthur\n                            handleOnScan(\"0xC4Fc43d36DAA20BB609827E5E4654Ac02c48b7d0\"); // lugano\n                            handleOnScan(\"0x55960902BaA42D94d7df260dc2700d6697ccfB23\"); // zurich\n                        }} // todo\n                        style={{width: '100%'}}\n                    />\n                </div>\n            </Fade>\n        </Modal>\n    );\n};\n\nconst mapStateToProps = ({ui}: StoreState) => {\n    return {ui};\n};\n\nexport const QrScannerModal = connect(\n    mapStateToProps,\n    {\n        fetchPreviousProductTag,\n        toggleQRScannerModal\n\n    }\n)(_QrScannerModal);\n","import React from 'react'\nimport {Map, Marker, Polyline, Popup, TileLayer} from \"react-leaflet\"\nimport {StoreState} from \"../../state/reducers\";\nimport {connect} from \"react-redux\";\nimport {IMapView} from \"../../interfaces/MapView\";\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Fade from '@material-ui/core/Fade';\nimport {toggleMapViewModal} from \"../../state/actions/mapView\";\nimport useWindowDimensions from \"../ui/hooks/useWindowDimensions\";\nimport Control from '@skyeer/react-leaflet-custom-control'\nimport {IProductTag} from \"../../interfaces/ProductTag\";\nimport L from 'leaflet'\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        modal: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n        },\n        closeMapButton: {\n            border: '2px solid grey',\n            backgroundColor: 'white',\n            fontWeight: 'bold',\n            marginLeft: '5%',\n        }\n    }),\n);\n\ninterface IPolyline {\n    from_lat: number,\n    from_long: number,\n    id: string,\n    to_lat: number,\n    to_long: number,\n}\n\ninterface Props {\n    mapView: IMapView,\n    toggleMapViewModal: typeof toggleMapViewModal\n}\n\nconst _MapViewModal = (props: Props) => {\n    const classes = useStyles();\n    const {height} = useWindowDimensions();\n\n    const mainMarkerIcon = new L.Icon({\n        iconUrl: require('../../assets/img/marker-icon.png'),\n        iconRetinaUrl: require('../../assets/img/marker-icon.png'),\n        iconSize: [35, 50],\n        shadowUrl: require('../../assets/img/marker-shadow.png')\n    });\n\n\n    const {productTag, previousProductTags, isMapViewModalOpen} = props.mapView;\n\n    const lines: IPolyline[] = [];\n    const allProductTags: IProductTag[] = previousProductTags.concat([productTag]);\n    allProductTags.forEach(pt1 => {\n        pt1.previousProductTags.forEach(pt2 => {\n            allProductTags.forEach(pt3 => {\n                if (pt2.productTagAddress === pt3.productTagAddress) {\n                    lines.push({\n                        from_lat: pt1.geolocation.latitude,\n                        from_long: pt1.geolocation.longitude,\n                        id: pt2.productTagAddress.concat(pt3.productTagAddress),\n                        to_lat: pt3.geolocation.latitude,\n                        to_long: pt3.geolocation.longitude,\n                    })\n                }\n            })\n        })\n    });\n\n\n    return (\n        <Modal\n            aria-labelledby=\"transition-modal-title\"\n            aria-describedby=\"transition-modal-description\"\n            className={classes.modal}\n            open={isMapViewModalOpen}\n            onClose={() => props.toggleMapViewModal(false)}\n            closeAfterTransition\n            BackdropComponent={Backdrop}\n            BackdropProps={{\n                timeout: 500,\n            }}\n        >\n            <Fade in={isMapViewModalOpen}>\n                <Map\n                    style={{\n                        height: height,\n                        width: height,\n                    }}\n                    animate={true}\n                    center={[productTag.geolocation.latitude, productTag.geolocation.longitude]} zoom={10}>\n                    <TileLayer\n                        attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                    />\n                    <Marker\n                        icon={mainMarkerIcon}\n                        position={[props.mapView.productTag.geolocation.latitude, props.mapView.productTag.geolocation.longitude]}>\n                        <Popup>\n                            {productTag.productTagAddress}\n                        </Popup>\n                    </Marker>\n                    {props.mapView.previousProductTags.map((productTag, index) => (\n                        <Marker key={index}\n                                position={[productTag.geolocation.latitude, productTag.geolocation.longitude]}>\n                            <Popup>\n                                {productTag.productTagAddress}\n                            </Popup>\n                        </Marker>\n                    ))}\n                    {lines.map(({id, from_lat, from_long, to_lat, to_long}) => {\n                        return <Polyline key={id} positions={[\n                            [from_lat, from_long], [to_lat, to_long],\n                        ]} color={'red'}/>\n                    })}\n                    <Control position=\"bottomright\">\n                        <button\n                            className={classes.closeMapButton}\n                            onClick={() => props.toggleMapViewModal(false)}\n                        >\n                            Close Map\n                        </button>\n                    </Control>\n                </Map>\n            </Fade>\n        </Modal>\n    )\n};\n\nconst mapStateToProps = ({mapView}: StoreState) => {\n    return {mapView};\n};\n\nexport const MapViewModal = connect(\n    mapStateToProps,\n    {\n        toggleMapViewModal\n    }\n)(_MapViewModal);\n","import React from 'react';\nimport {HashRouter, Route, Switch} from \"react-router-dom\"\nimport {Header} from \"./ui/Header\";\nimport ThemeProvider from \"@material-ui/styles/ThemeProvider\";\nimport theme from \"./ui/Theme\";\nimport {makeStyles} from '@material-ui/core/styles';\nimport HomeScreen from \"./screens/HomeScreen\";\nimport ProducerAuth from \"./screens/producer/auth/ProducerAuth\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Container from '@material-ui/core/Container';\nimport Footer from \"./ui/Footer\";\nimport {LoadingBackdrop} from \"./ui/Backdrop\";\nimport {routePaths} from \"../global/constants\";\nimport PtScanner from \"./screens/PTScanner\";\nimport {PrivateRoute} from \"./PrivateRoute\";\nimport Producer from \"./screens/producer/Producer\";\nimport {QrScannerModal} from \"./ui/QRScannerModal\";\nimport {MapViewModal} from \"./map_view/MapViewModal\";\n\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        flexDirection: 'column',\n        minHeight: '100vh',\n    },\n    main: {\n        // marginTop: theme.spacing(8),\n        marginBottom: theme.spacing(2),\n        // marginLeft: 0,\n        // paddingLeft: 0\n    }\n}));\n\n\nconst App: React.FC = () => {\n\n    const classes = useStyles();\n    return (\n        <div className={classes.root}>\n            <ThemeProvider theme={theme}>\n                <CssBaseline/>\n                <Container component=\"main\" className={classes.main} maxWidth=\"sm\">\n                    <HashRouter basename=\"/\">\n                            <Header/>\n                            <Switch>\n                                <Route exact path=\"/\" component={HomeScreen}/>\n                                <Route exact path={routePaths.ptScan} component={PtScanner}/>\n                                <Route exact path={routePaths.producerAuthPage} component={ProducerAuth}/>\n                                <PrivateRoute path={routePaths.producer} component={Producer}/>\n                            </Switch>\n                    </HashRouter>\n                </Container>\n                <Footer/>\n                <MapViewModal/>\n                <QrScannerModal/>\n                <LoadingBackdrop/>\n            </ThemeProvider>\n        </div>\n    );\n};\n\nexport default App;","import ReactDOM from \"react-dom\";\nimport React from 'react';\nimport {applyMiddleware, createStore} from \"redux\";\nimport {Provider} from \"react-redux\";\nimport thunk from \"redux-thunk\";\nimport {reducers} from \"./state/reducers\";\nimport App from \"./components/App\";\nimport {composeWithDevTools} from \"redux-devtools-extension\";\n\nexport const store = createStore(\n    reducers,\n    composeWithDevTools(applyMiddleware(thunk))\n);\n\n\nReactDOM.render(\n    <Provider store={store}>\n        <App/>\n    </Provider>,\n    document.querySelector('#root'));"],"sourceRoot":""}